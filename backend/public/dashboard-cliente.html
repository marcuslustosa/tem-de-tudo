<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard Cliente - Tem de Tudo</title>
<meta name="description" content="Painel do cliente Tem de Tudo - Gerencie pontos, pedidos e explore ofertas">
<meta name="theme-color" content="#6F1AB6">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link rel="stylesheet" href="global-styles.css">
<script src="global-auth.js"></script>
<script src="global-navbar.js"></script>
</head>
<body>
<div class="client-dashboard">
    <!-- Dashboard Header -->
    <div class="dashboard-header">
        <div class="header-top">
            <div class="logo-section">
                <img src="logo.svg" alt="Tem de Tudo" class="header-logo">
            </div>
            <button class="logout-btn" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i>
                <span>Sair</span>
            </button>
        </div>
        <div class="header-content">
            <div class="welcome-section">
                <h1 id="welcomeText">Ol√°, Cliente!</h1>
                <p>Bem-vindo ao seu painel pessoal</p>
            </div>
            <div class="user-avatar">
                <i class="fas fa-user"></i>
            </div>
        </div>
    </div>

    <!-- Dashboard Container -->
    <div class="dashboard-container">
        <!-- Points Card -->
        <div class="points-card fade-in">
            <div class="points-header">
                <div class="points-info">
                    <div class="points-title">
                        <i class="fas fa-star"></i>
                        Seus Pontos Tem de Tudo
                    </div>
                    <div class="points-value" id="pointsValue">1,250</div>
                    <div class="points-subtitle">pontos dispon√≠veis para usar</div>
                </div>
                <a href="app-pontos.html" class="use-points-btn">
                    <i class="fas fa-gift"></i>
                    <span>Usar Pontos</span>
                </a>
            </div>
            <div class="points-actions">
                <a href="app-qrcode.html" class="points-action">
                    <i class="fas fa-qrcode"></i>
                    <span>Mostrar QR Code</span>
                </a>
                <a href="app-extrato.html" class="points-action">
                    <i class="fas fa-history"></i>
                    <span>Ver Extrato</span>
                </a>
            </div>
        </div>

        <!-- Stats Overview -->
        <div class="stats-overview">
            <div class="mini-stat fade-in animate-delay-1">
                <div class="mini-stat-icon">
                    <i class="fas fa-shopping-bag"></i>
                </div>
                <div class="mini-stat-content">
                    <div class="mini-stat-value">47</div>
                    <div class="mini-stat-label">Compras</div>
                </div>
            </div>
            <div class="mini-stat fade-in animate-delay-2">
                <div class="mini-stat-icon">
                    <i class="fas fa-credit-card"></i>
                </div>
                <div class="mini-stat-content">
                    <div class="mini-stat-value">R$ 2.357</div>
                    <div class="mini-stat-label">Valor Gasto</div>
                </div>
            </div>
            <div class="mini-stat fade-in animate-delay-3">
                <div class="mini-stat-icon empresa">
                    <i class="fas fa-store"></i>
                </div>
                <div class="mini-stat-content">
                    <div class="mini-stat-value">12</div>
                    <div class="mini-stat-label">Empresas</div>
                </div>
            </div>
            <div class="mini-stat fade-in animate-delay-4">
                <div class="mini-stat-icon vip">
                    <i class="fas fa-crown"></i>
                </div>
                <div class="mini-stat-content">
                    <div class="mini-stat-value">Gold</div>
                    <div class="mini-stat-label">Status</div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="dashboard-section">
            <h2 class="section-title fade-in">
                <i class="fas fa-rocket"></i>
                A√ß√µes R√°pidas
            </h2>
            <div class="actions-grid">
                <a href="app-empresas.html" class="action-card fade-in animate-delay-1">
                    <div class="action-icon">
                        <i class="fas fa-search"></i>
                    </div>
                    <div class="action-content">
                        <h3>Explorar</h3>
                        <p>Descubra empresas parceiras e ofertas exclusivas</p>
                    </div>
                    <div class="action-arrow">
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </a>

                <a href="app-pontos.html" class="action-card fade-in animate-delay-2">
                    <div class="action-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="action-content">
                        <h3>Meus Pontos</h3>
                        <p>Gerencie e use seus pontos acumulados</p>
                    </div>
                    <div class="action-arrow">
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </a>

                <a href="app-qrcode.html" class="action-card fade-in animate-delay-3">
                    <div class="action-icon">
                        <i class="fas fa-qrcode"></i>
                    </div>
                    <div class="action-content">
                        <h3>Meu QR Code</h3>
                        <p>Mostre na loja para acumular pontos</p>
                    </div>
                    <div class="action-arrow">
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </a>

                <a href="app-cupons.html" class="action-card fade-in animate-delay-4">
                    <div class="action-icon">
                        <i class="fas fa-ticket-alt"></i>
                    </div>
                    <div class="action-content">
                        <h3>Meus Cupons</h3>
                        <p>Seus cupons de desconto dispon√≠veis</p>
                    </div>
                    <div class="action-arrow">
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </a>

                <a href="app-cashback.html" class="action-card fade-in animate-delay-1">
                    <div class="action-icon" style="background: var(--vivo-green);">
                        <i class="fas fa-hand-holding-usd"></i>
                    </div>
                    <div class="action-content">
                        <h3>Cashback</h3>
                        <p>Resgate dinheiro de volta nas compras</p>
                    </div>
                    <div class="action-arrow">
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </a>

                <a href="app-indicar.html" class="action-card fade-in animate-delay-2">
                    <div class="action-icon" style="background: var(--vivo-blue);">
                        <i class="fas fa-user-plus"></i>
                    </div>
                    <div class="action-content">
                        <h3>Indicar Amigos</h3>
                        <p>Ganhe pontos indicando amigos</p>
                    </div>
                    <div class="action-arrow">
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </a>
            </div>
        </div>

        <!-- Ofertas Especiais -->
        <div class="dashboard-section">
            <h2 class="section-title fade-in">
                <i class="fas fa-fire"></i>
                Ofertas Imperd√≠veis
            </h2>
            <div class="offers-carousel">
                <div class="offer-card fade-in animate-delay-1">
                    <div class="offer-badge">-50%</div>
                    <div class="offer-content">
                        <h3>Pizza Hut</h3>
                        <p>50% OFF em pizzas grandes</p>
                        <div class="offer-validity">V√°lido at√© 28/02</div>
                    </div>
                    <a href="app-oferta-detalhe.html?id=1" class="offer-btn">
                        <span>Resgatar</span>
                        <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
                
                <div class="offer-card fade-in animate-delay-2">
                    <div class="offer-badge">2x</div>
                    <div class="offer-content">
                        <h3>Farm√°cia Popular</h3>
                        <p>Pontos em dobro em medicamentos</p>
                        <div class="offer-validity">V√°lido at√© 05/03</div>
                    </div>
                    <a href="app-oferta-detalhe.html?id=2" class="offer-btn">
                        <span>Ativar</span>
                        <i class="fas fa-arrow-right"></i>
                    </a>
                </div>

                <div class="offer-card fade-in animate-delay-3">
                    <div class="offer-badge">R$20</div>
                    <div class="offer-content">
                        <h3>Uber</h3>
                        <p>R$ 20 OFF na primeira corrida</p>
                        <div class="offer-validity">Novo usu√°rio</div>
                    </div>
                    <a href="app-oferta-detalhe.html?id=3" class="offer-btn">
                        <span>Usar</span>
                        <i class="fas fa-arrow-right"></i>
                    </a>
                </div>
            </div>
        </div>

        <!-- Hist√≥rico Recente -->
        <div class="dashboard-section">
            <h2 class="section-title fade-in">
                <i class="fas fa-history"></i>
                Atividades Recentes
                <a href="app-historico-completo.html" class="section-link">Ver todos</a>
            </h2>
            <div class="activity-list">
                <div class="activity-item fade-in animate-delay-1">
                    <div class="activity-icon gained">
                        <i class="fas fa-plus"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-title">Pontos ganhos - McDonald's</div>
                        <div class="activity-subtitle">Hoje, 14:32</div>
                    </div>
                    <div class="activity-value positive">+120 pts</div>
                </div>

                <div class="activity-item fade-in animate-delay-2">
                    <div class="activity-icon used">
                        <i class="fas fa-minus"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-title">Cupom resgatado - Subway</div>
                        <div class="activity-subtitle">Ontem, 19:15</div>
                    </div>
                    <div class="activity-value negative">-500 pts</div>
                </div>

                <div class="activity-item fade-in animate-delay-3">
                    <div class="activity-icon cashback">
                        <i class="fas fa-hand-holding-usd"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-title">Cashback recebido - iFood</div>
                        <div class="activity-subtitle">19/02, 20:45</div>
                    </div>
                    <div class="activity-value positive">R$ 5,00</div>
                </div>
            </div>
        </div>

        <!-- Status VIP -->
        <div class="dashboard-section">
            <h2 class="section-title fade-in">
                <i class="fas fa-crown"></i>
                Status VIP Gold
            </h2>
            <div class="vip-status-card fade-in">
                <div class="vip-header">
                    <div class="vip-info">
                        <div class="vip-level">GOLD</div>
                        <div class="vip-description">Pr√≥ximo n√≠vel: Platinum (em R$ 1.143)</div>
                    </div>
                    <div class="vip-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 67%;"></div>
                        </div>
                        <div class="progress-text">R$ 2.357 / R$ 3.500</div>
                    </div>
                </div>
                <div class="vip-benefits">
                    <div class="benefit-item">
                        <i class="fas fa-percentage"></i>
                        <span>5% cashback extra</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-shipping-fast"></i>
                        <span>Frete gr√°tis</span>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-birthday-cake"></i>
                        <span>Oferta de anivers√°rio</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notifica√ß√µes -->
        <div class="dashboard-section">
            <h2 class="section-title fade-in">
                <i class="fas fa-bell"></i>
                Avisos e Notifica√ß√µes
                <a href="app-notificacoes.html" class="section-link">Ver todas</a>
            </h2>
            <div class="notifications-list">
                <div class="notification-item fade-in animate-delay-1 unread">
                    <div class="notification-icon new-offer">
                        <i class="fas fa-tag"></i>
                    </div>
                    <div class="notification-content">
                        <div class="notification-title">Nova oferta dispon√≠vel! üî•</div>
                        <div class="notification-subtitle">Burger King: 30% OFF no combo Whopper</div>
                        <div class="notification-time">h√° 2 horas</div>
                    </div>
                </div>

                <div class="notification-item fade-in animate-delay-2">
                    <div class="notification-icon points">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="notification-content">
                        <div class="notification-title">Pontos prestes a vencer</div>
                        <div class="notification-subtitle">350 pontos vencem em 5 dias</div>
                        <div class="notification-time">ontem</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Acesso R√°pido - Conta -->
        <div class="dashboard-section">
            <h2 class="section-title fade-in">
                <i class="fas fa-user-cog"></i>
                Minha Conta
            </h2>
            <div class="actions-grid">
                <a href="app-perfil.html" class="action-card fade-in animate-delay-1">
                    <div class="action-icon">
                        <i class="fas fa-user-edit"></i>
                    </div>
                    <div class="action-content">
                        <h3>Meu Perfil</h3>
                        <p>Dados pessoais e prefer√™ncias</p>
                    </div>
                    <div class="action-arrow">
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </a>

                <a href="app-cartao-fidelidade.html" class="action-card fade-in animate-delay-2">
                    <div class="action-icon" style="background: var(--vivo-orange);">
                        <i class="fas fa-id-card"></i>
                    </div>
                    <div class="action-content">
                        <h3>Cart√£o Fidelidade</h3>
                        <p>Seu cart√£o digital Tem de Tudo</p>
                    </div>
                    <div class="action-arrow">
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </a>

                <a href="app-configuracoes.html" class="action-card fade-in animate-delay-3">
                    <div class="action-icon">
                        <i class="fas fa-cog"></i>
                    </div>
                    <div class="action-content">
                        <h3>Configura√ß√µes</h3>
                        <p>Notifica√ß√µes, privacidade e mais</p>
                    </div>
                    <div class="action-arrow">
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </a>

                <a href="app-ajuda.html" class="action-card fade-in animate-delay-4">
                    <div class="action-icon" style="background: var(--vivo-green);">
                        <i class="fas fa-headset"></i>
                    </div>
                    <div class="action-content">
                        <h3>Ajuda & Suporte</h3>
                        <p>FAQ, chat e contato direto</p>
                    </div>
                    <div class="action-arrow">
                        <i class="fas fa-chevron-right"></i>
                    </div>
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Bottom Navigation -->
<div class="bottom-nav">
    <div class="nav-container">
        <a href="dashboard-cliente.html" class="nav-item active">
            <i class="fas fa-home"></i>
            <span>In√≠cio</span>
        </a>
        <a href="app-empresas.html" class="nav-item">
            <i class="fas fa-search"></i>
            <span>Explorar</span>
        </a>
        <a href="app-pontos.html" class="nav-item">
            <div style="position: relative;">
                <i class="fas fa-star"></i>
                <div class="notification-badge" id="pointsBadge">1.2K</div>
            </div>
            <span>Pontos</span>
        </a>
        <a href="app-promocoes.html" class="nav-item">
            <div style="position: relative;">
                <i class="fas fa-tags"></i>
                <div class="notification-badge" style="background: #F59E0B;">3</div>
            </div>
            <span>Ofertas</span>
        </a>
        <a href="app-perfil.html" class="nav-item">
            <i class="fas fa-bars"></i>
            <span>Menu</span>
        </a>
    </div>
</div>

<script>
// Logout Function
function logout() {
    if (confirm('Tem certeza que deseja sair?')) {
        localStorage.clear();
        sessionStorage.clear();
        
        // Show success notification
        showNotification('Logout realizado com sucesso!', 'success');
        
        setTimeout(() => {
            window.location.href = '/entrar.html';
        }, 1000);
    }
}

// Show notification
function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.innerHTML = `<i class="fas fa-check-circle"></i> ${message}`;
    notification.className = `notification ${type}`;
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: var(--vivo-purple);
        color: white;
        padding: 1rem 1.5rem;
        border-radius: var(--border-radius);
        font-weight: 600;
        z-index: 10000;
        box-shadow: 0 10px 30px rgba(111, 26, 182, 0.3);
        animation: slideIn 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    `;
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.remove();
    }, 3000);
}

// Initialize Dashboard
document.addEventListener('DOMContentLoaded', function() {
    console.log('Dashboard cliente carregado com sucesso');
    
    // Check authentication - TEMPORARIAMENTE DESABILITADO PARA VISUALIZA√á√ÉO
    /*
    const token = localStorage.getItem('authToken') || localStorage.getItem('token');
    const userType = localStorage.getItem('userType');
    const userName = localStorage.getItem('userName') || localStorage.getItem('user');
    
    if (!token) {
        showNotification('Sess√£o expirada. Redirecionando para login...', 'error');
        setTimeout(() => {
            window.location.href = '/entrar.html';
        }, 2000);
        return;
    }
    
    if (userType && userType !== 'cliente') {
        showNotification('√Årea restrita para clientes. Redirecionando...', 'error');
        setTimeout(() => {
            window.location.href = '/entrar.html';
        }, 2000);
        return;
    }
    */
    
    // Para visualiza√ß√£o do design, simular usu√°rio logado
    const userName = 'Jo√£o Silva';
    
    // Update welcome text with user name
    if (userName) {
        const welcomeText = document.getElementById('welcomeText');
        let name = userName;
        
        if (typeof userName === 'string' && userName.startsWith('{')) {
            try {
                const userObj = JSON.parse(userName);
                name = userObj.name || 'Cliente';
            } catch (e) {
                name = userName;
            }
        }
        
        const firstName = name.split(' ')[0];
        welcomeText.textContent = `Ol√°, ${firstName}!`;
    }
    
    // Animate counter for points
    setTimeout(() => {
        animateCounter('pointsValue', 1250);
    }, 500);
    
    // Load dashboard data
    loadDashboardData();
    
    // Set up refresh interval
    setInterval(refreshData, 60000); // Refresh every minute
});

// Animate number counter
function animateCounter(elementId, targetValue) {
    const element = document.getElementById(elementId);
    const startValue = 0;
    const duration = 1500;
    const increment = targetValue / (duration / 16);
    let currentValue = startValue;
    
    const timer = setInterval(() => {
        currentValue += increment;
        if (currentValue >= targetValue) {
            element.textContent = targetValue.toLocaleString();
            clearInterval(timer);
        } else {
            element.textContent = Math.floor(currentValue).toLocaleString();
        }
    }, 16);
}

// Load dashboard data
async function loadDashboardData() {
    try {
        console.log('Carregando dados do dashboard...');
        // This would typically fetch from API
        // const response = await fetch('/api/client/dashboard');
        // const data = await response.json();
        // updateDashboardStats(data);
    } catch (error) {
        console.error('Erro ao carregar dados:', error);
    }
}

// Refresh data periodically
function refreshData() {
    console.log('Atualizando dados do dashboard...');
    // loadDashboardData();
}

// Add CSS animations
const style = document.createElement('style');
style.textContent = `
    @keyframes slideIn {
        from {
            transform: translateX(100%);
            opacity: 0;
        }
        to {
            transform: translateX(0);
            opacity: 1;
        }
    }
`;
document.head.appendChild(style);
</script>
</body>
</html>