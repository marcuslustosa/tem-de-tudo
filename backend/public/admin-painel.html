<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Painel Administrativo - Tem de Tudo</title>
<meta name="description" content="Painel de controle administrativo do Tem de Tudo">
<meta name="theme-color" content="#6F1AB6">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<script src="js/config.js"></script>
<script src="js/auth-guard.js"></script>


<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link rel="stylesheet" href="css/vivo-styles.css">
<script src="js/config.js"></script>
<script src="js/auth-guard.js"></script>
</head>
<body>
<div class="admin-page">
    <!-- Header -->
    <div class="admin-header">
        <div class="header-content">
            <div class="header-left">
                <h1>Painel Tem de Tudo</h1>
                <p>Gestão completa do sistema <span class="admin-badge">Admin</span></p>
            </div>
            <button class="logout-btn" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i>
                <span>Sair</span>
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="admin-main">
        <!-- Welcome Section -->
        <div class="welcome-section fade-in">
            <h2 class="welcome-title">Bem-vindo ao Dashboard</h2>
            <p class="welcome-subtitle">Gerencie todos os aspectos do sistema Tem de Tudo</p>
        </div>

        <!-- Quick Stats -->
        <div class="quick-stats fade-in animate-delay-1">
            <h3>Resumo do Sistema</h3>
            <div class="quick-stats-grid">
                <div class="quick-stat">
                    <div class="quick-stat-value" id="activeUsers">1,234</div>
                    <div class="quick-stat-label">Usuários Ativos</div>
                </div>
                <div class="quick-stat">
                    <div class="quick-stat-value" id="totalCompanies">89</div>
                    <div class="quick-stat-label">Empresas</div>
                </div>
                <div class="quick-stat">
                    <div class="quick-stat-value" id="totalPoints">45.2k</div>
                    <div class="quick-stat-label">Pontos Ativos</div>
                </div>
                <div class="quick-stat">
                    <div class="quick-stat-value" id="dailyTransactions">156</div>
                    <div class="quick-stat-label">Transações Hoje</div>
                </div>
            </div>
        </div>

        <!-- Stats Section -->
        <h2 class="section-title fade-in animate-delay-1">
            <i class="fas fa-chart-bar"></i>
            Métricas Detalhadas
        </h2>
        
        <div class="stats-grid">
            <div class="stat-card fade-in animate-delay-2">
                <div class="stat-header">
                    <div class="stat-label">Usuários Cadastrados</div>
                    <div class="stat-icon users">
                        <i class="fas fa-users"></i>
                    </div>
                </div>
                <div class="stat-value" id="totalUsers">1,234</div>
                <div class="stat-change positive">
                    <i class="fas fa-arrow-up"></i>
                    <span>12% este mês</span>
                </div>
            </div>

            <div class="stat-card fade-in animate-delay-3">
                <div class="stat-header">
                    <div class="stat-label">Empresas Parceiras</div>
                    <div class="stat-icon stores">
                        <i class="fas fa-store"></i>
                    </div>
                </div>
                <div class="stat-value" id="totalStores">89</div>
                <div class="stat-change positive">
                    <i class="fas fa-arrow-up"></i>
                    <span>8% este mês</span>
                </div>
            </div>

            <div class="stat-card fade-in animate-delay-2">
                <div class="stat-header">
                    <div class="stat-label">Pontos em Circulação</div>
                    <div class="stat-icon points">
                        <i class="fas fa-coins"></i>
                    </div>
                </div>
                <div class="stat-value" id="totalPointsCirculation">45.2k</div>
                <div class="stat-change positive">
                    <i class="fas fa-arrow-up"></i>
                    <span>15% este mês</span>
                </div>
            </div>

            <div class="stat-card fade-in animate-delay-3">
                <div class="stat-header">
                    <div class="stat-label">Transações Mensais</div>
                    <div class="stat-icon orders">
                        <i class="fas fa-exchange-alt"></i>
                    </div>
                </div>
                <div class="stat-value" id="monthlyTransactions">2.1k</div>
                <div class="stat-change positive">
                    <i class="fas fa-arrow-up"></i>
                    <span>22% este mês</span>
                </div>
            </div>
        </div>

        <!-- Actions Section -->
        <h2 class="section-title fade-in">
            <i class="fas fa-tools"></i>
            Ações Administrativas
        </h2>

        <div class="admin-actions">
            <a href="admin-usuarios.html" class="action-card fade-in animate-delay-1">
                <div class="action-header">
                    <div class="action-icon">
                        <i class="fas fa-user-cog"></i>
                    </div>
                    <div class="action-title">Gerenciar Usuários</div>
                </div>
                <div class="action-description">
                    Visualizar, criar, editar e gerenciar contas de usuários e empresas do sistema
                </div>
            </a>

            <a href="admin-empresas.html" class="action-card fade-in animate-delay-2">
                <div class="action-header">
                    <div class="action-icon">
                        <i class="fas fa-building"></i>
                    </div>
                    <div class="action-title">Empresas Parceiras</div>
                </div>
                <div class="action-description">
                    Controlar empresas cadastradas, aprovar novos parceiros e gerenciar parcerias
                </div>
            </a>

            <a href="admin-promocoes.html" class="action-card fade-in animate-delay-3">
                <div class="action-header">
                    <div class="action-icon">
                        <i class="fas fa-tags"></i>
                    </div>
                    <div class="action-title">Promoções Globais</div>
                </div>
                <div class="action-description">
                    Criar e gerenciar promoções especiais aplicáveis em todo o sistema
                </div>
            </a>

            <a href="admin-relatorios.html" class="action-card fade-in animate-delay-1">
                <div class="action-header">
                    <div class="action-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="action-title">Relatórios Avançados</div>
                </div>
                <div class="action-description">
                    Gerar relatórios detalhados sobre uso do sistema, receitas e performance
                </div>
            </a>

            <a href="admin-configuracoes.html" class="action-card fade-in animate-delay-2">
                <div class="action-header">
                    <div class="action-icon">
                        <i class="fas fa-cogs"></i>
                    </div>
                    <div class="action-title">Configurações</div>
                </div>
                <div class="action-description">
                    Ajustar configurações globais do sistema, taxas e parâmetros de funcionamento
                </div>
            </a>

            <a href="admin-suporte.html" class="action-card fade-in animate-delay-3">
                <div class="action-header">
                    <div class="action-icon">
                        <i class="fas fa-headset"></i>
                    </div>
                    <div class="action-title">Central de Suporte</div>
                </div>
                <div class="action-description">
                    Atender solicitações de suporte de usuários e empresas parceiras
                </div>
            </a>
        </div>
    </div>
</div>

<script>
// Load stats with mock data
function loadAdminStats() {
    // Simulate API calls with realistic data
    const stats = {
        activeUsers: Math.floor(Math.random() * 500) + 1000,
        totalCompanies: Math.floor(Math.random() * 20) + 80,
        totalPoints: (Math.floor(Math.random() * 50) + 40).toFixed(1) + 'k',
        dailyTransactions: Math.floor(Math.random() * 100) + 100,
        totalUsers: Math.floor(Math.random() * 500) + 1000,
        totalStores: Math.floor(Math.random() * 20) + 80,
        totalPointsCirculation: (Math.floor(Math.random() * 50) + 40).toFixed(1) + 'k',
        monthlyTransactions: (Math.floor(Math.random() * 1000) + 2000).toLocaleString()
    };

    // Update UI
    Object.keys(stats).forEach(key => {
        const element = document.getElementById(key);
        if (element) {
            element.textContent = stats[key];
        }
    });
}

// Logout function
function logout() {
    if (confirm('Tem certeza que deseja sair do sistema?')) {
        localStorage.clear();
        window.location.href = 'admin-login.html';
    }
}

// Initialize page
document.addEventListener('DOMContentLoaded', function() {
    loadAdminStats();
    
    // Auto-update stats every 30 seconds
    setInterval(loadAdminStats, 30000);
    
    // DESENVOLVIMENTO: Bypass da verificação de autenticação para localhost
    const token = localStorage.getItem('adminToken');
    if (!token && !window.location.hostname.includes('localhost') && !window.location.hostname.includes('127.0.0.1')) {
        // Só redireciona para login em produção, não em desenvolvimento
        window.location.href = 'admin-login.html';
    } else if (!token) {
        // Em desenvolvimento, criar token fake se não existir
        localStorage.setItem('adminToken', 'dev_admin_token_' + Date.now());
        localStorage.setItem('adminUser', JSON.stringify({
            id: 1,
            name: 'Admin Desenvolvimento',
            email: 'dev@localhost',
            role: 'admin'
        }));
    }
});
</script>
</body>
</html>
