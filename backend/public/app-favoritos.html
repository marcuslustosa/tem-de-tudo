<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Meus Favoritos - Tem de Tudo</title>
<meta name="description" content="Suas empresas e ofertas favoritas em um só lugar">
<meta name="theme-color" content="#6F1AB6">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<script src="js/config.js"></script>
<script src="js/auth-guard.js"></script>


<link rel="stylesheet" href="css/vivo-styles.css">
</head>
<body>
<div class="app-page">
    <!-- Header -->
    <div class="app-header">
        <div class="header-nav">
            <button class="back-btn" onclick="window.history.back()">
                <i class="fas fa-arrow-left"></i>
            </button>
            <h1>Meus Favoritos</h1>
            <div style="width: 40px;"></div>
        </div>
        <div class="header-subtitle">
            Suas empresas e ofertas preferidas em um só lugar
        </div>
    </div>

    <!-- Content -->
    <div class="app-content">
        <!-- Statistics Cards -->
        <div class="section">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="totalFavoritos">8</div>
                    <div class="stat-label">Favoritos</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="ofertas">5</div>
                    <div class="stat-label">Com Ofertas</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="economia">R$ 247</div>
                    <div class="stat-label">Economia</div>
                </div>
            </div>
        </div>

        <!-- Filter Tabs -->
        <div class="section">
            <div class="filter-tabs">
                <button class="filter-tab active" onclick="filterFavorites('todos')">Todos</button>
                <button class="filter-tab" onclick="filterFavorites('ofertas')">Com Ofertas</button>
                <button class="filter-tab" onclick="filterFavorites('proximos')">Próximos</button>
                <button class="filter-tab" onclick="filterFavorites('categoria')">Por Categoria</button>
            </div>
        </div>

        <!-- Favorites Grid -->
        <div class="section">
            <div class="favorites-grid" id="favoritesGrid">
                <!-- Favorite items will be generated here -->
            </div>
            
            <div class="empty-state" id="emptyState" style="display: none;">
                <i class="fas fa-heart"></i>
                <h3>Nenhum favorito encontrado</h3>
                <p>Que tal explorar nossas ofertas e começar a marcar seus favoritos?</p>
                <a href="app-promocoes.html" class="btn">Explorar Ofertas</a>
            </div>
        </div>
    </div>
</div>

<!-- Bottom Navigation -->
<div class="bottom-nav">
    <div class="nav-container">
        <a href="dashboard-cliente.html" class="nav-item">
            <i class="fas fa-home"></i>
            <span>Início</span>
        </a>
        <a href="app-empresas.html" class="nav-item">
            <i class="fas fa-search"></i>
            <span>Explorar</span>
        </a>
        <a href="app-pontos.html" class="nav-item">
            <i class="fas fa-star"></i>
            <span>Pontos</span>
        </a>
        <a href="app-promocoes.html" class="nav-item active">
            <i class="fas fa-tags"></i>
            <span>Ofertas</span>
        </a>
        <a href="app-perfil.html" class="nav-item">
            <i class="fas fa-bars"></i>
            <span>Menu</span>
        </a>
    </div>
</div>

<script>
let favoritos = [];
let filtroAtual = 'todos';

// Dados de exemplo dos favoritos
const favoritosExemplo = [
    {
        id: 1,
        nome: 'Padaria do Joáo',
        categoria: 'Alimentaçáo',
        descricao: 'Páes frescos, doces e salgados artesanais',
        desconto: 15,
        rating: 4.8,
        reviews: 124,
        distancia: 0.3,
        hasOffer: true,
        image: 'fa-bread-slice'
    },
    {
        id: 2,
        nome: 'Super Mercado Prime',
        categoria: 'Supermercado',
        descricao: 'Tudo para sua casa com os melhores preços',
        desconto: 20,
        rating: 4.6,
        reviews: 289,
        distancia: 0.8,
        hasOffer: true,
        image: 'fa-shopping-cart'
    },
    {
        id: 3,
        nome: 'Loja de Roupas Fashion',
        categoria: 'Moda',
        descricao: 'As últimas tendências da moda masculina e feminina',
        desconto: 0,
        rating: 4.9,
        reviews: 67,
        distancia: 1.2,
        hasOffer: false,
        image: 'fa-tshirt'
    },
    {
        id: 4,
        nome: 'Farmácia Saúde+',
        categoria: 'Saúde',
        descricao: 'Medicamentos, cosméticos e produtos de higiene',
        desconto: 10,
        rating: 4.7,
        reviews: 156,
        distancia: 0.5,
        hasOffer: true,
        image: 'fa-pills'
    },
    {
        id: 5,
        nome: 'Auto Center Premium',
        categoria: 'Automotivo',
        descricao: 'Serviços automotivos e peças originais',
        desconto: 25,
        rating: 4.5,
        reviews: 89,
        distancia: 2.1,
        hasOffer: true,
        image: 'fa-car'
    },
    {
        id: 6,
        nome: 'Pet Shop Amigo',
        categoria: 'Pet Shop',
        descricao: 'Tudo para seu pet com muito carinho',
        desconto: 0,
        rating: 4.9,
        reviews: 203,
        distancia: 0.9,
        hasOffer: false,
        image: 'fa-paw'
    },
    {
        id: 7,
        nome: 'Restaurante Delícia',
        categoria: 'Restaurante',
        descricao: 'Pratos deliciosos da culinária brasileira',
        desconto: 30,
        rating: 4.8,
        reviews: 178,
        distancia: 0.4,
        hasOffer: true,
        image: 'fa-utensils'
    },
    {
        id: 8,
        nome: 'Academia Fitness Pro',
        categoria: 'Academia',
        descricao: 'Equipamentos modernos e personal trainers',
        desconto: 0,
        rating: 4.6,
        reviews: 134,
        distancia: 1.5,
        hasOffer: false,
        image: 'fa-dumbbell'
    }
];

document.addEventListener('DOMContentLoaded', function() {
    favoritos = [...favoritosExemplo];
    renderFavorites();
    updateStats();
});

function renderFavorites() {
    let dadosFiltrados = [...favoritos];
    
    switch(filtroAtual) {
        case 'ofertas':
            dadosFiltrados = favoritos.filter(f => f.hasOffer);
            break;
        case 'proximos':
            dadosFiltrados = favoritos.filter(f => f.distancia <= 1.0);
            break;
        case 'categoria':
            dadosFiltrados = favoritos.filter(f => f.categoria === 'Alimentaçáo');
            break;
    }
    
    const grid = document.getElementById('favoritesGrid');
    const emptyState = document.getElementById('emptyState');
    
    if (dadosFiltrados.length === 0) {
        grid.style.display = 'none';
        emptyState.style.display = 'block';
        return;
    }
    
    grid.style.display = 'grid';
    emptyState.style.display = 'none';
    
    grid.innerHTML = dadosFiltrados.map(favorito => `
        <div class="favorite-card" data-id="${favorito.id}" data-categoria="${favorito.categoria.toLowerCase()}">
            <div class="card-image">
                <i class="fas ${favorito.image}"></i>
                ${favorito.hasOffer ? `<div class="promo-badge">${favorito.desconto}% OFF</div>` : ''}
                <button class="favorite-btn favorited" onclick="toggleFavorite(event, ${favorito.id})">
                    <i class="fas fa-heart"></i>
                </button>
            </div>
            
            <div class="card-content">
                <div class="card-title">${favorito.nome}</div>
                <div class="card-category">${favorito.categoria}</div>
                <div class="card-description">${favorito.descricao}</div>
                
                <div class="card-footer">
                    <div class="card-rating">
                        <div class="stars">
                            ${'<i class="fas fa-star"></i>'.repeat(Math.floor(favorito.rating))}
                            ${favorito.rating % 1 ? '<i class="fas fa-star-half-alt"></i>' : ''}
                        </div>
                        <span class="rating-text">${favorito.rating} (${favorito.reviews})</span>
                    </div>
                    <div class="card-distance">${favorito.distancia} km</div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn-action" onclick="viewDetails(${favorito.id})">
                        <i class="fas fa-info-circle"></i> Detalhes
                    </button>
                    <button class="btn-action primary" onclick="visitStore(${favorito.id})">
                        <i class="fas fa-store"></i> Visitar
                    </button>
                </div>
            </div>
        </div>
    `).join('');
}

function filterFavorites(tipo) {
    filtroAtual = tipo;
    
    // Atualizar tabs ativas
    document.querySelectorAll('.filter-tab').forEach(tab => tab.classList.remove('active'));
    event.target.classList.add('active');
    
    renderFavorites();
    updateStats();
}

function toggleFavorite(event, favoriteId) {
    event.preventDefault();
    event.stopPropagation();
    
    const btn = event.currentTarget;
    const card = btn.closest('.favorite-card');
    
    // Simular remoçáo dos favoritos
    card.style.animation = 'fadeOut 0.3s ease-out';
    setTimeout(() => {
        favoritos = favoritos.filter(f => f.id !== favoriteId);
        renderFavorites();
        updateStats();
        showNotification('Removido dos favoritos', 'info');
    }, 300);
}

function updateStats() {
    const dadosFiltrados = filtroAtual === 'todos' ? favoritos : 
        filtroAtual === 'ofertas' ? favoritos.filter(f => f.hasOffer) :
        filtroAtual === 'proximos' ? favoritos.filter(f => f.distancia <= 1.0) :
        favoritos.filter(f => f.categoria === 'Alimentaçáo');
    
    const totalFavoritos = dadosFiltrados.length;
    const ofertas = dadosFiltrados.filter(f => f.hasOffer).length;
    const economia = dadosFiltrados.reduce((sum, f) => sum + (f.hasOffer ? f.desconto * 10 : 0), 0);
    
    document.getElementById('totalFavoritos').textContent = totalFavoritos;
    document.getElementById('ofertas').textContent = ofertas;
    document.getElementById('economia').textContent = `R$ ${economia}`;
}

function viewDetails(favoriteId) {
    const favorito = favoritos.find(f => f.id === favoriteId);
    showNotification(`Abrindo detalhes de ${favorito.nome}`, 'info');
    // Aqui seria o redirecionamento para página de detalhes
}

function visitStore(favoriteId) {
    const favorito = favoritos.find(f => f.id === favoriteId);
    showNotification(`Redirecionando para ${favorito.nome}`, 'success');
    // Aqui seria o redirecionamento para a loja/empresa
}

function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.innerHTML = `<i class="fas fa-info-circle"></i> ${message}`;
    notification.style.cssText = `
        position: fixed; top: 20px; right: 20px; background: var(--vivo-purple); color: white;
        padding: 1rem 1.5rem; border-radius: var(--border-radius); font-weight: 600; z-index: 10000;
        box-shadow: var(--shadow-lg); display: flex; align-items: center; gap: 0.5rem; max-width: 300px;
    `;
    
    if (type === 'success') {
        notification.style.background = 'var(--vivo-green)';
        notification.querySelector('i').className = 'fas fa-check-circle';
    }
    
    document.body.appendChild(notification);
    setTimeout(() => notification.remove(), 3000);
}

// CSS para animaçáo de fadeOut
const style = document.createElement('style');
style.textContent = `
    @keyframes fadeOut {
        from { opacity: 1; transform: translateY(0); }
        to { opacity: 0; transform: translateY(-20px); }
    }
`;
document.head.appendChild(style);
</script>
</body>
</html>
<a href="app-empresa-detalhes.html?id=1" class="empresa-card" data-categoria="alimentacao">
<img src="https://images.unsplash.com/photo-1571091718767-18b5b1457add?w=200&h=200&fit=crop" alt="Burger King" class="empresa-img">
<div class="empresa-content">
<div class="empresa-name">Burger King Premium</div>
<div class="empresa-category">Fast Food Gourmet</div>
<div class="empresa-footer">
<div class="empresa-distance">
<i class="fas fa-map-marker-alt"></i> 0.8 km
                            </div>
<div class="empresa-pontos">2.5x pontos</div>
</div>
</div>
<div class="promo-badge">50% OFF</div>
<button class="btn-fav favorited" onclick="toggleFavorite(event, 1)">
<i class="fas fa-heart"></i>
</button>
</a>
<a href="app-empresa-detalhes.html?id=2" class="empresa-card" data-categoria="beleza">
<img src="https://images.unsplash.com/photo-1560066984-138dadb4c035?w=200&h=200&fit=crop" alt="Bella Est?tica" class="empresa-img">
<div class="empresa-content">
<div class="empresa-name">Bella Est?tica Spa</div>
<div class="empresa-category">Cl?nica de Beleza</div>
<div class="empresa-footer">
<div class="empresa-distance">
<i class="fas fa-map-marker-alt"></i> 1.2 km
                            </div>
<div class="empresa-pontos">2x pontos</div>
</div>
</div>
<div class="promo-badge">30% OFF</div>
<button class="btn-fav favorited" onclick="toggleFavorite(event, 2)">
<i class="fas fa-heart"></i>
</button>
</a>
<a href="app-empresa-detalhes.html?id=3" class="empresa-card" data-categoria="tecnologia">
<img src="https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=200&h=200&fit=crop" alt="TechHub Store" class="empresa-img">
<div class="empresa-content">
<div class="empresa-name">TechHub Electronics</div>
<div class="empresa-category">Eletr?nicos & Gadgets</div>
<div class="empresa-footer">
<div class="empresa-distance">
<i class="fas fa-map-marker-alt"></i> 0.5 km
                            </div>
<div class="empresa-pontos">3x pontos</div>
</div>
</div>
<div class="promo-badge">15% OFF</div>
<button class="btn-fav favorited" onclick="toggleFavorite(event, 3)">
<i class="fas fa-heart"></i>
</button>
</a>
<a href="app-empresa-detalhes.html?id=4" class="empresa-card" data-categoria="fitness">
<img src="https://images.unsplash.com/photo-1534438327276-14e5300c3a48?w=200&h=200&fit=crop" alt="FitLife Academia" class="empresa-img">
<div class="empresa-content">
<div class="empresa-name">FitLife Premium Gym</div>
<div class="empresa-category">Academia & Wellness</div>
<div class="empresa-footer">
<div class="empresa-distance">
<i class="fas fa-map-marker-alt"></i> 2.1 km
                            </div>
<div class="empresa-pontos">1.5x pontos</div>
</div>
</div>
<button class="btn-fav favorited" onclick="toggleFavorite(event, 4)">
<i class="fas fa-heart"></i>
</button>
</a>
<a href="app-empresa-detalhes.html?id=5" class="empresa-card" data-categoria="alimentacao">
<img src="https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?w=200&h=200&fit=crop" alt="Caf? Central" class="empresa-img">
<div class="empresa-content">
<div class="empresa-name">Caf? Central Premium</div>
<div class="empresa-category">Cafeteria Gourmet</div>
<div class="empresa-footer">
<div class="empresa-distance">
<i class="fas fa-map-marker-alt"></i> 0.3 km
                            </div>
<div class="empresa-pontos">1.8x pontos</div>
</div>
</div>
<div class="promo-badge">25% OFF</div>
<button class="btn-fav favorited" onclick="toggleFavorite(event, 5)">
<i class="fas fa-heart"></i>
</button>
</a>
<a href="app-empresa-detalhes.html?id=6" class="empresa-card" data-categoria="alimentacao">
<img src="https://images.unsplash.com/photo-1555396273-367ea4eb4db5?w=200&h=200&fit=crop" alt="Bella Pizza" class="empresa-img">
<div class="empresa-content">
<div class="empresa-name">Bella Pizza Napoletana</div>
<div class="empresa-category">Pizzaria Artesanal</div>
<div class="empresa-footer">
<div class="empresa-distance">
<i class="fas fa-map-marker-alt"></i> 1.7 km
                            </div>
<div class="empresa-pontos">2.2x pontos</div>
</div>
</div>
<div class="promo-badge">20% OFF</div>
<button class="btn-fav favorited" onclick="toggleFavorite(event, 6)">
<i class="fas fa-heart"></i>
</button>
</a>
<a href="app-empresa-detalhes.html?id=7" class="empresa-card" data-categoria="moda">
<img src="https://images.unsplash.com/photo-1441984904996-e0b6ba687e04?w=200&h=200&fit=crop" alt="Style Shop" class="empresa-img">
<div class="empresa-content">
<div class="empresa-name">Style & Fashion Co.</div>
<div class="empresa-category">Moda & Acess?rios</div>
<div class="empresa-footer">
<div class="empresa-distance">
<i class="fas fa-map-marker-alt"></i> 1.4 km
                            </div>
<div class="empresa-pontos">2.8x pontos</div>
</div>
</div>
<button class="btn-fav favorited" onclick="toggleFavorite(event, 7)">
<i class="fas fa-heart"></i>
</button>
</a>
<a href="app-empresa-detalhes.html?id=8" class="empresa-card" data-categoria="saude">
<img src="https://images.unsplash.com/photo-1576091160399-112ba8d25d1f?w=200&h=200&fit=crop" alt="HealthCare Plus" class="empresa-img">
<div class="empresa-content">
<div class="empresa-name">HealthCare Plus</div>
<div class="empresa-category">Cl?nica M?dica</div>
<div class="empresa-footer">
<div class="empresa-distance">
<i class="fas fa-map-marker-alt"></i> 0.9 km
                            </div>
<div class="empresa-pontos">1.2x pontos</div>
</div>
</div>
<button class="btn-fav favorited" onclick="toggleFavorite(event, 8)">
<i class="fas fa-heart"></i>
</button>
</a>
</div>
</div>
<div class="empty-state" id="emptyState" style="display: none;">
<i class="fas fa-heart-broken"></i>
<h3>Nenhum favorito encontrado</h3>
<p>Explore nossas empresas parceiras e adicione suas favoritas para facilitar o acesso!</p>
<a href="app-empresas.html">Descobrir Empresas</a>
</div>
</div>
<nav class="bottom-nav">
<a href="app-inicio.html" class="nav-item">
<i class="fas fa-home"></i>
<span>In?cio</span>
</a>
<a href="app-empresas.html" class="nav-item">
<i class="fas fa-search"></i>
<span>Buscar</span>
</a>
<a href="app-meus-pontos.html" class="nav-item">
<i class="fas fa-wallet"></i>
<span>Pontos</span>
</a>
<a href="app-promocoes.html" class="nav-item">
<i class="fas fa-tags"></i>
<span>Promo??es</span>
</a>
<a href="app-perfil.html" class="nav-item">
<i class="fas fa-user"></i>
<span>Perfil</span>
</a>
</nav>
<script>
        // Filtrar favoritos
        function filterFavorites(tipo) {
            // Atualizar abas ativas
            document.querySelectorAll('.filter-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            const empresas = document.querySelectorAll('.empresa-card');
            const emptyState = document.getElementById('emptyState');
            const favoritesContent = document.getElementById('favoritesContent');
            let visibleCount = 0;
            empresas.forEach(empresa => {
                let shouldShow = false;
                const categoria = empresa.getAttribute('data-categoria');
                const hasPromo = empresa.querySelector('.promo-badge');
                const distance = parseFloat(empresa.querySelector('.empresa-distance').textContent);
                switch(tipo) {
                    case 'todos':
                        shouldShow = true;
                        break;
                    case 'ofertas':
                        shouldShow = hasPromo !== null;
                        break;
                    case 'proximos':
                        shouldShow = distance <= 1.0;
                        break;
                    case 'categoria':
                        // Para demonstra??o, mostrar apenas alimenta??o
                        shouldShow = categoria === 'alimentacao';
                        break;
                }
                empresa.style.display = shouldShow ? 'flex' : 'none';
                if (shouldShow) visibleCount++;
            });
            // Mostrar/esconder estado vazio
            if (visibleCount === 0) {
                favoritesContent.style.display = 'none';
                emptyState.style.display = 'block';
            } else {
                favoritesContent.style.display = 'block';
                emptyState.style.display = 'none';
            }
            // Atualizar estat?sticas
            updateStats();
        }
        // Toggle favorito
        function toggleFavorite(event, empresaId) {
            event.preventDefault();
            event.stopPropagation();
            const btn = event.currentTarget;
            const isCurrentlyFavorited = btn.classList.contains('favorited');
            if (isCurrentlyFavorited) {
                btn.classList.remove('favorited');
                btn.innerHTML = '<i class="fas fa-heart"></i>';
                // Simular remo??o com anima??o
                setTimeout(() => {
                    btn.closest('.empresa-card').style.display = 'none';
                    updateStats();
                }, 300);
                console.log(`Empresa ${empresaId} removida dos favoritos`);
            } else {
                btn.classList.add('favorited');
                btn.innerHTML = '<i class="fas fa-heart"></i>';
                console.log(`Empresa ${empresaId} adicionada aos favoritos`);
            }
            // Feedback visual
            btn.style.transform = 'scale(1.3)';
            setTimeout(() => {
                btn.style.transform = 'scale(1)';
            }, 200);
        }
        // Atualizar estat?sticas
        function updateStats() {
            const empresasVisiveis = document.querySelectorAll('.empresa-card[style*="flex"], .empresa-card:not([style])');
            const empresasComOfertas = document.querySelectorAll('.empresa-card .promo-badge');
            let totalFavoritos = 0;
            let ofertas = 0;
            let economia = 0;
            empresasVisiveis.forEach(empresa => {
                if (empresa.style.display !== 'none') {
                    totalFavoritos++;
                    const promoBadge = empresa.querySelector('.promo-badge');
                    if (promoBadge) {
                        ofertas++;
                        const desconto = parseInt(promoBadge.textContent);
                        economia += Math.floor(Math.random() * 50) + desconto; // Simular economia
                    }
                }
            });
            document.getElementById('totalFavoritos').textContent = totalFavoritos;
            document.getElementById('ofertas').textContent = ofertas;
            document.getElementById('economia').textContent = 'R$ ' + economia;
        }
        // Inicializar
        document.addEventListener('DOMContentLoaded', () => {
            updateStats();
        });
    </script>
</body>
</html>

