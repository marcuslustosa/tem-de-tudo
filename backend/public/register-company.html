<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cadastro Empresarial - Tem de Tudo</title>
    
    <!-- Meta Tags -->
    <meta name="description" content="Cadastre sua empresa no programa de fidelidade Tem de Tudo">
    <meta name="theme-color" content="#667eea">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <link rel="manifest" href="/manifest.json">
    
    <!-- Icons -->
    <link rel="icon" type="image/png" href="/frontend/img/logo.png">
    
    <!-- Stylesheets -->
    
    
    <script src="/js/config.js"></script>
    <script src="/js/auth-manager.js" defer></script>
    <script src="/js/api-client.js" defer></script>
    <script src="/js/validators.js" defer></script>
    <script src="/js/ui-helpers.js" defer></script>
    <script src="/js/auth-guard.js" data-require-auth="cliente"></script>
        <link rel="stylesheet" href="/css/global-unified.css">
    <link rel="stylesheet" href="/css/theme-escuro.css">`n</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-container">
                <a href="/" class="logo">
                    <img src="/frontend/img/logo.png" alt="Tem de Tudo" class="logo-image">
                </a>
                
                <nav class="nav-menu">
                    <a href="/"><i class="fas fa-home icon-sm"></i> In?cio</a>
                    <a href="/estabelecimentos.html"><i class="fas fa-store icon-sm"></i> Estabelecimentos</a>
                    <a href="/contato.html"><i class="fas fa-envelope icon-sm"></i> Contato</a>
                    <a href="/entrar.html"><i class="fas fa-sign-in-alt icon-sm"></i> Login</a>
                </nav>
                
                <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </header>

        <!-- Mobile Navigation -->
        <div class="mobile-nav" id="mobileNav">
            <div class="mobile-nav-menu">
                <a href="/"><i class="fas fa-home icon-sm"></i> In?cio</a>
                <a href="/estabelecimentos.html"><i class="fas fa-store icon-sm"></i> Estabelecimentos</a>
                <a href="/contato.html"><i class="fas fa-envelope icon-sm"></i> Contato</a>
                <a href="/entrar.html"><i class="fas fa-sign-in-alt icon-sm"></i> Login</a>
            </div>
        </div>

        <!-- Main Content -->
        <main class="app-main">
            <!-- Hero Section -->
            <section style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: var(--space-12) var(--space-6); text-align: center;">
                <div style="max-width: 800px; margin: 0 auto;">
                    <i class="fas fa-store" style="font-size: 3rem; color: var(--accent-orange); margin-bottom: 1rem; display: block;"></i>
                    <h1 style="font-size: 2.5rem; font-weight: 700; margin-bottom: 1rem;">Cadastre sua Empresa</h1>
                    <p style="font-size: 1.125rem; opacity: 0.9;">Junte-se ao programa de fidelidade e aumente suas vendas!</p>
                </div>
            </section>

            <!-- Step Indicator -->
            <div style="background: white; padding: var(--space-6) var(--space-6); border-bottom: 1px solid var(--gray-200);">
                <div style="max-width: 1000px; margin: 0 auto;">
                    <div class="step-indicator" id="stepIndicator">
                        <div class="step active">
                            <div class="step-number">1</div>
                            <div class="step-label">Planos</div>
                        </div>
                        <div class="step-line"></div>
                        <div class="step">
                            <div class="step-number">2</div>
                            <div class="step-label">Dados</div>
                        </div>
                        <div class="step-line"></div>
                        <div class="step">
                            <div class="step-number">3</div>
                            <div class="step-label">Pagamento</div>
                        </div>
                        <div class="step-line"></div>
                        <div class="step">
                            <div class="step-number">4</div>
                            <div class="step-label">Confirma??o</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Content Area -->
            <section style="padding: var(--space-12) var(--space-6); background: var(--gray-50); min-height: 70vh;">
                <div style="max-width: 1000px; margin: 0 auto;">
                    
                    <!-- Step 1: Plans -->
                    <div id="step1" class="step-content active">
                        <div style="text-align: center; margin-bottom: 3rem;">
                            <h2 style="font-size: 2rem; font-weight: 700; color: var(--gray-900); margin-bottom: 1rem;">Escolha seu Plano</h2>
                            <p style="color: var(--gray-600); font-size: 1.125rem;">Selecione o plano que melhor atende s necessidades da sua empresa</p>
                        </div>

                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin-bottom: 2rem;">
                            
                            <!-- Plano Bsico -->
                            <div class="plan-card" onclick="selectPlan('basico')">
                                <div class="plan-header">
                                    <h3>Plano Bsico</h3>
                                    <div class="plan-price">
                                        <span class="price">R$ 89</span>
                                        <span class="period">/ms</span>
                                    </div>
                                </div>
                                <div class="plan-body">
                                    <ul class="plan-features">
                                        <li><i class="fas fa-check"></i> At 500 clientes cadastrados</li>
                                        <li><i class="fas fa-check"></i> QR Code personalizado</li>
                                        <li><i class="fas fa-check"></i> Relatrios bsicos</li>
                                        <li><i class="fas fa-check"></i> Suporte por email</li>
                                        <li><i class="fas fa-check"></i> 3 campanhas por m?s</li>
                                    </ul>
                                </div>
                                <div class="plan-footer">
                                    <div class="plan-tag">Ideal para pequenos neg?cios</div>
                                </div>
                            </div>

                            <!-- Plano Profissional -->
                            <div class="plan-card popular" onclick="selectPlan('profissional')">
                                <div class="popular-badge">Mais Popular</div>
                                <div class="plan-header">
                                    <h3>Plano Profissional</h3>
                                    <div class="plan-price">
                                        <span class="price">R$ 189</span>
                                        <span class="period">/ms</span>
                                    </div>
                                </div>
                                <div class="plan-body">
                                    <ul class="plan-features">
                                        <li><i class="fas fa-check"></i> At 2.000 clientes</li>
                                        <li><i class="fas fa-check"></i> QR Code + App personalizado</li>
                                        <li><i class="fas fa-check"></i> Relatrios avanados</li>
                                        <li><i class="fas fa-check"></i> Suporte prioritrio</li>
                                        <li><i class="fas fa-check"></i> Campanhas ilimitadas</li>
                                        <li><i class="fas fa-check"></i> Integrao com redes sociais</li>
                                        <li><i class="fas fa-check"></i> Dashboard analytics</li>
                                    </ul>
                                </div>
                                <div class="plan-footer">
                                    <div class="plan-tag">Perfeito para empresas em crescimento</div>
                                </div>
                            </div>

                            <!-- Plano Empresarial -->
                            <div class="plan-card" onclick="selectPlan('empresarial')">
                                <div class="plan-header">
                                    <h3>Plano Empresarial</h3>
                                    <div class="plan-price">
                                        <span class="price">R$ 389</span>
                                        <span class="period">/ms</span>
                                    </div>
                                </div>
                                <div class="plan-body">
                                    <ul class="plan-features">
                                        <li><i class="fas fa-check"></i> Clientes ilimitados</li>
                                        <li><i class="fas fa-check"></i> Mltiplas filiais</li>
                                        <li><i class="fas fa-check"></i> API personalizada</li>
                                        <li><i class="fas fa-check"></i> Gerente de conta dedicado</li>
                                        <li><i class="fas fa-check"></i> White label disponvel</li>
                                        <li><i class="fas fa-check"></i> Integraes avanadas</li>
                                        <li><i class="fas fa-check"></i> Suporte 24/7</li>
                                        <li><i class="fas fa-check"></i> Treinamento da equipe</li>
                                    </ul>
                                </div>
                                <div class="plan-footer">
                                    <div class="plan-tag">Para grandes empresas</div>
                                </div>
                            </div>
                        </div>

                        <div style="text-align: center; margin-top: 2rem;">
                            <button class="btn btn-lg" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 1rem 3rem;" onclick="nextStep()" id="continueBtn" disabled>
                                <i class="fas fa-arrow-right icon-sm"></i> Continuar com Plano Selecionado
                            </button>
                        </div>
                    </div>

                    <!-- Step 2: Company Data -->
                    <div id="step2" class="step-content">
                        <div style="text-align: center; margin-bottom: 3rem;">
                            <h2 style="font-size: 2rem; font-weight: 700; color: var(--gray-900); margin-bottom: 1rem;">Dados da Empresa</h2>
                            <p style="color: var(--gray-600); font-size: 1.125rem;">Preencha as informaes da sua empresa</p>
                        </div>

                        <div class="card" style="max-width: 700px; margin: 0 auto;">
                            <form id="companyForm" class="card-body" style="padding: 10px;">
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
                                    <div class="form-group">
                                        <label for="razaoSocial" class="form-label">
                                            <i class="fas fa-building icon-sm"></i> Razo Social *
                                        </label>
                                        <input type="text" id="razaoSocial" name="razaoSocial" class="form-control" required>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="nomeFantasia" class="form-label">
                                            <i class="fas fa-store icon-sm"></i> Nome Fantasia *
                                        </label>
                                        <input type="text" id="nomeFantasia" name="nomeFantasia" class="form-control" required>
                                    </div>
                                </div>

                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
                                    <div class="form-group">
                                        <label for="cnpj" class="form-label">
                                            <i class="fas fa-id-card icon-sm"></i> CNPJ *
                                        </label>
                                        <input type="text" id="cnpj" name="cnpj" class="form-control" placeholder="00.000.000/0000-00" required>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="inscricaoEstadual" class="form-label">
                                            <i class="fas fa-certificate icon-sm"></i> Inscri??o Estadual
                                        </label>
                                        <input type="text" id="inscricaoEstadual" name="inscricaoEstadual" class="form-control">
                                    </div>
                                </div>

                                <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
                                    <div class="form-group">
                                        <label for="email" class="form-label">
                                            <i class="fas fa-envelope icon-sm"></i> Email Empresarial *
                                        </label>
                                        <input type="email" id="email" name="email" class="form-control" required>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="telefone" class="form-label">
                                            <i class="fas fa-phone icon-sm"></i> Telefone *
                                        </label>
                                        <input type="tel" id="telefone" name="telefone" class="form-control" placeholder="(11) 99999-9999" required>
                                    </div>
                                </div>

                                <div class="form-group" style="margin-bottom: 1.5rem;">
                                    <label for="website" class="form-label">
                                        <i class="fas fa-globe icon-sm"></i> Website (opcional)
                                    </label>
                                    <input type="url" id="website" name="website" class="form-control" placeholder="https://www.exemplo.com">
                                </div>

                                <div class="form-group" style="margin-bottom: 1.5rem;">
                                    <label for="descricao" class="form-label">
                                        <i class="fas fa-align-left icon-sm"></i> Descri??o do Neg?cio *
                                    </label>
                                    <textarea id="descricao" name="descricao" class="form-control" rows="4" placeholder="Descreva brevemente sua empresa e os produtos/servios oferecidos..." required></textarea>
                                </div>

                                <h4 style="color: var(--gray-900); margin-bottom: 1rem; border-bottom: 1px solid var(--gray-200); padding-bottom: 0.5rem;">
                                    <i class="fas fa-map-marker-alt icon-sm"></i> Endere?o
                                </h4>

                                <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
                                    <div class="form-group">
                                        <label for="cep" class="form-label">CEP *</label>
                                        <input type="text" id="cep" name="cep" class="form-control" placeholder="00000-000" required>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="numero" class="form-label">N?mero *</label>
                                        <input type="text" id="numero" name="numero" class="form-control" required>
                                    </div>
                                </div>

                                <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
                                    <div class="form-group">
                                        <label for="endereco" class="form-label">Endere?o *</label>
                                        <input type="text" id="endereco" name="endereco" class="form-control" readonly>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="complemento" class="form-label">Complemento</label>
                                        <input type="text" id="complemento" name="complemento" class="form-control">
                                    </div>
                                </div>

                                <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 1.5rem; margin-bottom: 2rem;">
                                    <div class="form-group">
                                        <label for="bairro" class="form-label">Bairro *</label>
                                        <input type="text" id="bairro" name="bairro" class="form-control" readonly>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="cidade" class="form-label">Cidade *</label>
                                        <input type="text" id="cidade" name="cidade" class="form-control" readonly>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="uf" class="form-label">UF *</label>
                                        <input type="text" id="uf" name="uf" class="form-control" readonly>
                                    </div>
                                </div>
                            </form>
                        </div>

                        <div style="text-align: center; margin-top: 2rem; display: flex; gap: 1rem; justify-content: center;">
                            <button class="btn btn-ghost" onclick="prevStep()">
                                <i class="fas fa-arrow-left icon-sm"></i> Voltar
                            </button>
                            <button class="btn btn-lg" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 1rem 3rem;" onclick="validateFormAndNext()">
                                <i class="fas fa-arrow-right icon-sm"></i> Continuar
                            </button>
                        </div>
                    </div>

                    <!-- Step 3: Payment -->
                    <div id="step3" class="step-content">
                        <div style="text-align: center; margin-bottom: 3rem;">
                            <h2 style="font-size: 2rem; font-weight: 700; color: var(--gray-900); margin-bottom: 1rem;">Pagamento</h2>
                            <p style="color: var(--gray-600); font-size: 1.125rem;">Confirme seu plano e m?todo de pagamento</p>
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 400px; gap: 3rem; align-items: start;" class="payment-grid">
                            
                            <!-- Payment Methods -->
                            <div>
                                <div class="card" style="margin-bottom: 2rem;">
                                    <div class="card-header">
                                        <h3 style="color: white; margin: 0;"><i class="fas fa-credit-card icon-sm"></i> M?todo de Pagamento</h3>
                                    </div>
                                    <div class="card-body">
                                        <div class="payment-methods">
                                            <div class="payment-method" onclick="selectPaymentMethod('credit')">
                                                <div class="method-icon">
                                                    <i class="fas fa-credit-card"></i>
                                                </div>
                                                <div class="method-info">
                                                    <h4>Cart?o de Cr?dito</h4>
                                                    <p>Pagamento mensal autom?tico</p>
                                                </div>
                                                <div class="method-check">
                                                    <i class="fas fa-check"></i>
                                                </div>
                                            </div>

                                            <div class="payment-method" onclick="selectPaymentMethod('pix')">
                                                <div class="method-icon">
                                                    <i class="fab fa-pix"></i>
                                                </div>
                                                <div class="method-info">
                                                    <h4>PIX</h4>
                                                    <p>Pagamento  vista com 10% desconto</p>
                                                </div>
                                                <div class="method-check">
                                                    <i class="fas fa-check"></i>
                                                </div>
                                            </div>

                                            <div class="payment-method" onclick="selectPaymentMethod('boleto')">
                                                <div class="method-icon">
                                                    <i class="fas fa-barcode"></i>
                                                </div>
                                                <div class="method-info">
                                                    <h4>Boleto Banc?rio</h4>
                                                    <p>Vencimento em 5 dias teis</p>
                                                </div>
                                                <div class="method-check">
                                                    <i class="fas fa-check"></i>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Payment Form -->
                                <div id="paymentForm" class="card" style="display: none;">
                                    <div class="card-body">
                                        <!-- Credit Card Form -->
                                        <div id="creditForm" style="display: none;">
                                            <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                                                <div class="form-group">
                                                    <label class="form-label">N?mero do Cart?o</label>
                                                    <input type="text" class="form-control" placeholder="0000 0000 0000 0000" maxlength="19">
                                                </div>
                                                <div class="form-group">
                                                    <label class="form-label">CVV</label>
                                                    <input type="text" class="form-control" placeholder="000" maxlength="3">
                                                </div>
                                            </div>
                                            
                                            <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 1rem; margin-bottom: 1rem;">
                                                <div class="form-group">
                                                    <label class="form-label">Validade</label>
                                                    <input type="text" class="form-control" placeholder="MM/AA" maxlength="5">
                                                </div>
                                                <div class="form-group">
                                                    <label class="form-label">Nome no Carto</label>
                                                    <input type="text" class="form-control" placeholder="Nome como impresso no carto">
                                                </div>
                                            </div>
                                        </div>

                                        <!-- PIX Form -->
                                        <div id="pixForm" style="display: none; text-align: center;">
                                            <div style="background: #f0f9ff; padding: 2rem; border-radius: 12px; margin-bottom: 1rem;">
                                                <i class="fab fa-pix" style="font-size: 3rem; color: #0369a1; margin-bottom: 1rem;"></i>
                                                <h4>Pagamento via PIX</h4>
                                                <p>Aps confirmar, voc receber o QR Code para pagamento</p>
                                            </div>
                                        </div>

                                        <!-- Boleto Form -->
                                        <div id="boletoForm" style="display: none; text-align: center;">
                                            <div style="background: #fef3c7; padding: 2rem; border-radius: 12px; margin-bottom: 1rem;">
                                                <i class="fas fa-barcode" style="font-size: 3rem; color: #764ba2; margin-bottom: 1rem;"></i>
                                                <h4>Boleto Bancrio</h4>
                                                <p>O boleto ser enviado por email e ter vencimento em 5 dias teis</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Order Summary -->
                            <div class="card">
                                <div class="card-header">
                                    <h3 style="color: white; margin: 0;"><i class="fas fa-file-invoice icon-sm"></i> Resumo do Pedido</h3>
                                </div>
                                <div class="card-body">
                                    <div id="orderSummary">
                                        <!-- Will be populated by JavaScript -->
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style="text-align: center; margin-top: 2rem; display: flex; gap: 1rem; justify-content: center;">
                            <button class="btn btn-ghost" onclick="prevStep()">
                                <i class="fas fa-arrow-left icon-sm"></i> Voltar
                            </button>
                            <button class="btn btn-lg btn-success" onclick="processPayment()" id="payBtn" disabled style="padding: 1rem 3rem;">
                                <i class="fas fa-credit-card icon-sm"></i> Finalizar Pagamento
                            </button>
                        </div>
                    </div>

                    <!-- Step 4: Confirmation -->
                    <div id="step4" class="step-content">
                        <div style="text-align: center;">
                            <div style="background: white; padding: 3rem; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); margin: 2rem auto; max-width: 600px;">
                                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); width: 80px; height: 80px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 2rem;">
                                    <i class="fas fa-check" style="font-size: 2rem; color: white;"></i>
                                </div>
                                
                                <h2 style="font-size: 2rem; font-weight: 700; color: var(--gray-900); margin-bottom: 1rem;">Cadastro Realizado!</h2>
                                <p style="color: var(--gray-600); font-size: 1.125rem; margin-bottom: 2rem;">Sua empresa foi cadastrada com sucesso no programa de fidelidade Tem de Tudo.</p>
                                
                                <div id="confirmationDetails" style="text-align: left; background: var(--gray-50); padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem;">
                                    <!-- Will be populated by JavaScript -->
                                </div>
                                
                                <div style="background: #fef3c7; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem;">
                                    <h4 style="color: #92400e; margin-bottom: 0.5rem;"><i class="fas fa-clock icon-sm"></i> Prximos Passos</h4>
                                    <p style="color: #92400e; margin-bottom: 0; font-size: 0.875rem;">
                                        Nossa equipe entrar em contato em at 24 horas para ativao da conta e treinamento inicial.
                                        Voc receber um email com as credenciais de acesso ao painel administrativo.
                                    </p>
                                </div>
                                
                                <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                                    <a href="/" class="btn btn-ghost">
                                        <i class="fas fa-home icon-sm"></i> Voltar ao Incio
                                    </a>
                                    <a href="/contato.html" class="btn" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; text-decoration: none;">
                                        <i class="fas fa-headset icon-sm"></i> Falar com Suporte
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); display: none; z-index: 9999; align-items: center; justify-content: center;">
        <div style="text-align: center; color: white;">
            <div style="border: 3px solid #667eea; border-top: 3px solid transparent; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto 1rem;"></div>
            <div id="loadingText">Processando...</div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="/js/app-mobile.js"></script>
    <script>
        let currentStep = 1;
        let selectedPlan = null;
        let selectedPaymentMethod = null;
        let formData = {};

        const plans = {
            basico: {
                name: 'Plano B?sico',
                price: 89,
                features: ['At? 500 clientes', 'QR Code personalizado', 'Relat?rios b?sicos', 'Suporte por email', '3 campanhas/m?s']
            },
            profissional: {
                name: 'Plano Profissional', 
                price: 189,
                features: ['At? 2.000 clientes', 'App personalizado', 'Relat?rios avan?ados', 'Suporte priorit?rio', 'Campanhas ilimitadas', 'Redes sociais', 'Analytics']
            },
            empresarial: {
                name: 'Plano Empresarial',
                price: 389, 
                features: ['Clientes ilimitados', 'M?ltiplas filiais', 'API personalizada', 'Gerente dedicado', 'White label', 'Integra??es avan?adas', 'Suporte 24/7']
            }
        };

        function toggleMobileMenu() {
            const mobileNav = document.getElementById('mobileNav');
            const btn = document.querySelector('.mobile-menu-btn');
            mobileNav.classList.toggle('active');
            btn.classList.toggle('active');
        }

        function selectPlan(planId) {
            // Remove previous selection
            document.querySelectorAll('.plan-card').forEach(card => {
                card.classList.remove('selected');
            });

            // Add selection to clicked plan
            event.currentTarget.classList.add('selected');
            selectedPlan = planId;
            
            // Enable continue button
            document.getElementById('continueBtn').disabled = false;
            document.getElementById('continueBtn').style.opacity = '1';
        }

        function nextStep() {
            if (currentStep < 4) {
                // Hide current step
                document.getElementById(`step${currentStep}`).classList.remove('active');
                
                // Update step indicator
                document.querySelectorAll('.step')[currentStep - 1].classList.remove('active');
                document.querySelectorAll('.step')[currentStep - 1].classList.add('completed');
                
                currentStep++;
                
                // Show next step
                document.getElementById(`step${currentStep}`).classList.add('active');
                document.querySelectorAll('.step')[currentStep - 1].classList.add('active');
                
                // Special handling for step 3 (payment)
                if (currentStep === 3) {
                    updateOrderSummary();
                }
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                // Hide current step
                document.getElementById(`step${currentStep}`).classList.remove('active');
                
                // Update step indicator
                document.querySelectorAll('.step')[currentStep - 1].classList.remove('active');
                document.querySelectorAll('.step')[currentStep - 1].classList.remove('completed');
                
                currentStep--;
                
                // Show previous step
                document.getElementById(`step${currentStep}`).classList.add('active');
                document.querySelectorAll('.step')[currentStep - 1].classList.add('active');
                document.querySelectorAll('.step')[currentStep - 1].classList.remove('completed');
            }
        }

        function validateFormAndNext() {
            const form = document.getElementById('companyForm');
            const formDataObj = new FormData(form);
            const data = Object.fromEntries(formDataObj);
            
            // Basic validation
            const requiredFields = ['razaoSocial', 'nomeFantasia', 'cnpj', 'email', 'telefone', 'descricao', 'cep', 'numero'];
            const missingFields = requiredFields.filter(field => !data[field] || data[field].trim() === '');
            
            if (missingFields.length > 0) {
                alert('Por favor, preencha todos os campos obrigat?rios marcados com *');
                return;
            }
            
            // CNPJ validation (basic)
            if (!isValidCNPJ(data.cnpj)) {
                alert('Por favor, insira um CNPJ v?lido');
                return;
            }
            
            // Email validation
            if (!isValidEmail(data.email)) {
                alert('Por favor, insira um email v?lido');
                return;
            }
            
            // Store form data
            formData = data;
            nextStep();
        }

        function selectPaymentMethod(method) {
            // Remove previous selection
            document.querySelectorAll('.payment-method').forEach(elem => {
                elem.classList.remove('selected');
            });
            
            // Add selection
            event.currentTarget.classList.add('selected');
            selectedPaymentMethod = method;
            
            // Show payment form
            document.getElementById('paymentForm').style.display = 'block';
            
            // Hide all forms first
            document.getElementById('creditForm').style.display = 'none';
            document.getElementById('pixForm').style.display = 'none'; 
            document.getElementById('boletoForm').style.display = 'none';
            
            // Show selected form
            document.getElementById(`${method}Form`).style.display = 'block';
            
            // Enable pay button
            document.getElementById('payBtn').disabled = false;
            
            // Update order summary
            updateOrderSummary();
        }

        function updateOrderSummary() {
            if (!selectedPlan) return;
            
            const plan = plans[selectedPlan];
            let discount = 0;
            let discountText = '';
            
            if (selectedPaymentMethod === 'pix') {
                discount = plan.price * 0.1;
                discountText = '<div style="color: #764ba2; font-weight: 600;"><i class="fas fa-tag icon-sm"></i> Desconto PIX (10%): -R$ ' + discount.toFixed(2) + '</div>';
            }
            
            const finalPrice = plan.price - discount;
            
            document.getElementById('orderSummary').innerHTML = `
                <div style="margin-bottom: 1.5rem;">
                    <h4 style="color: #667eea; margin-bottom: 1rem;">${plan.name}</h4>
                    <ul style="list-style: none; padding: 0; margin: 0;">
                        ${plan.features.map(feature => `<li style="padding: 0.25rem 0; color: var(--gray-600); font-size: 0.875rem;"><i class="fas fa-check" style="color: #667eea; margin-right: 0.5rem;"></i>${feature}</li>`).join('')}
                    </ul>
                </div>
                
                <div style="border-top: 1px solid var(--gray-200); padding-top: 1rem;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                        <span>Mensalidade:</span>
                        <span>R$ ${plan.price.toFixed(2)}</span>
                    </div>
                    ${discountText}
                    <div style="display: flex; justify-content: space-between; font-weight: 700; font-size: 1.125rem; color: #667eea; border-top: 1px solid var(--gray-200); padding-top: 1rem; margin-top: 1rem;">
                        <span>Total:</span>
                        <span>R$ ${finalPrice.toFixed(2)}</span>
                    </div>
                </div>
            `;
        }

        function processPayment() {
            const loadingOverlay = document.getElementById('loadingOverlay');
            const loadingText = document.getElementById('loadingText');
            
            loadingOverlay.style.display = 'flex';
            loadingText.textContent = 'Processando pagamento...';
            
            // Simulate payment processing
            setTimeout(() => {
                loadingText.textContent = 'Criando conta empresarial...';
                
                setTimeout(() => {
                    loadingText.textContent = 'Enviando confirmaes...';
                    
                    setTimeout(() => {
                        loadingOverlay.style.display = 'none';
                        
                        // Show confirmation details
                        showConfirmation();
                        nextStep();
                        
                    }, 1500);
                }, 1500);
            }, 2000);
        }

        function showConfirmation() {
            const plan = plans[selectedPlan];
            const paymentMethodNames = {
                'credit': 'Carto de Crdito',
                'pix': 'PIX',
                'boleto': 'Boleto Banc?rio'
            };
            
            document.getElementById('confirmationDetails').innerHTML = `
                <div style="display: grid; gap: 0.75rem;">
                    <div style="display: flex; justify-content: space-between;">
                        <strong>Empresa:</strong>
                        <span>${formData.nomeFantasia}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <strong>CNPJ:</strong>
                        <span>${formData.cnpj}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <strong>Plano:</strong>
                        <span>${plan.name}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <strong>Pagamento:</strong>
                        <span>${paymentMethodNames[selectedPaymentMethod]}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <strong>Protocolo:</strong>
                        <span>#TDT${Date.now().toString().slice(-6)}</span>
                    </div>
                </div>
            `;
        }

        // Utility functions
        function isValidCNPJ(cnpj) {
            // Basic CNPJ validation
            cnpj = cnpj.replace(/[^\d]+/g, '');
            return cnpj.length === 14;
        }

        function isValidEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        // CEP lookup
        document.getElementById('cep').addEventListener('blur', function() {
            const cep = this.value.replace(/\D/g, '');
            if (cep.length === 8) {
                fetch(`https://viacep.com.br/ws/${cep}/json/`)
                    .then(response => response.json())
                    .then(data => {
                        if (!data.erro) {
                            document.getElementById('endereco').value = data.logradouro;
                            document.getElementById('bairro').value = data.bairro;
                            document.getElementById('cidade').value = data.localidade;
                            document.getElementById('uf').value = data.uf;
                        }
                    })
                    .catch(error => console.log('Erro ao buscar CEP:', error));
            }
        });

        // Input masks
        document.addEventListener('DOMContentLoaded', function() {
            // CNPJ mask
            document.getElementById('cnpj').addEventListener('input', function() {
                let value = this.value.replace(/\D/g, '');
                value = value.replace(/^(\d{2})(\d)/, '$1.$2');
                value = value.replace(/^(\d{2})\.(\d{3})(\d)/, '$1.$2.$3');
                value = value.replace(/\.(\d{3})(\d)/, '.$1/$2');
                value = value.replace(/(\d{4})(\d)/, '$1-$2');
                this.value = value;
            });

            // Phone mask
            document.getElementById('telefone').addEventListener('input', function() {
                let value = this.value.replace(/\D/g, '');
                value = value.replace(/(\d{2})(\d)/, '($1) $2');
                value = value.replace(/(\d{5})(\d)/, '$1-$2');
                this.value = value;
            });

            // CEP mask
            document.getElementById('cep').addEventListener('input', function() {
                let value = this.value.replace(/\D/g, '');
                value = value.replace(/^(\d{5})(\d)/, '$1-$2');
                this.value = value;
            });
        });
    </script><script src="/js/global.js"></script>
</body>
</html>

  <script>
    // Menu toggle
    document.addEventListener('DOMContentLoaded', function() {
      const menuToggle = document.getElementById('menu-toggle');
      const navLinks = document.getElementById('nav-links');

      if (menuToggle && navLinks) {
        menuToggle.addEventListener('click', function() {
          navLinks.classList.toggle('active');
        });
      }

      // Form submission
      const form = document.getElementById('register-company-form');
      if (form) {
        form.addEventListener('submit', function(e) {
          e.preventDefault();
          
          const formData = new FormData(form);
          const data = Object.fromEntries(formData.entries());
          
          // Simple validation
          if (!data.companyName || !data.email || !data.phone || !data.address || !data.description) {
            alert('Por favor, preencha todos os campos obrigatrios.');
            return;
          }

          // Email validation
          const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          if (!emailRegex.test(data.email)) {
            alert('Por favor, insira um email vlido.');
            return;
          }

          // Phone validation (basic)
          const phoneRegex = /^[\d\s\(\)\-\+]+$/;
          if (!phoneRegex.test(data.phone)) {
            alert('Por favor, insira um telefone vlido.');
            return;
          }

          // Simulate form submission
          const submitBtn = form.querySelector('button[type="submit"]');
          const originalText = submitBtn.textContent;
          submitBtn.textContent = 'Enviando...';
          submitBtn.disabled = true;

          // Simulate API call with billing notification
          setTimeout(() => {
            const billingMessage = `
? CADASTRO EMPRESARIAL RECEBIDO!

Ol, ${data.companyName}!

Sua solicitao de cadastro foi recebida com sucesso! 

?? PRXIMOS PASSOS:
1. Anlise dos dados (1-2 dias teis)
2. Envio da proposta comercial por email
3. Aprovao e ativao do perfil

?? INFORMAES DE COBRANA:
 Taxa de adeso: R$ 149,90 (pagamento nico)
 Mensalidade: R$ 79,90/ms
 Sem taxa por transao
 Primeiro ms GRTIS para teste!

?? DOCUMENTOS NECESSRIOS:
Voc receber um email em ${data.email} com:
 Contrato de parceria
 Informaes bancrias para pagamento
 Manual de integrao
 Cronograma de ativao

? PRAZO DE ATIVAO:
 Aps aprovao: 24-48h
 Treinamento da equipe incluso
 Suporte tcnico completo

Dvidas? Entre em contato:
?? (11) 4000-1234
?? parcerias@temdetudo.com
?? WhatsApp: (11) 94000-1234

Obrigado por escolher a TemDeTudo! ??
            `.trim();
            
            alert(billingMessage);
            
            // Simulate sending billing email
            console.log('?? Email de cobrana enviado para:', data.email);
            console.log('?? Dados para cobrana:', {
              empresa: data.companyName,
              email: data.email,
              telefone: data.phone,
              endereco: data.address,
              taxa_adesao: 149.90,
              mensalidade: 79.90,
              primeiro_mes_gratis: true
            });
            
            form.reset();
            submitBtn.textContent = originalText;
            submitBtn.disabled = false;
            
            // Redirect to confirmation page after 3 seconds
            setTimeout(() => {
              window.location.href = '/register-company-success.html';
            }, 3000);
          }, 2000);
        });
      }
    });
  </script>
    <script src="/js/global.js"></script>
</body>
</html>

