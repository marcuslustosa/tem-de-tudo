<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Relatórios - Admin Tem de Tudo</title>
<meta name="description" content="Dashboard de relatórios e analytics administrativo">
<meta name="theme-color" content="#6F1AB6">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="Tem de Tudo">
<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" href="img/icon-192.png">
<link rel="icon" type="image/png" sizes="32x32" href="img/icon-32.png">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link rel="stylesheet" href="css/vivo-styles.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="js/config.js"></script>
<script src="js/auth-guard.js"></script>
</head>
</head>
<body>
<!-- HEADER -->
<div class="header">
    <div class="header-top">
        <h1 class="page-title">
            <i class="fas fa-chart-bar"></i>
            Relatórios e Analytics
        </h1>
        <a href="admin-dashboard.html" class="back-btn">
            <i class="fas fa-arrow-left"></i>
            Voltar
        </a>
    </div>
</div>

<!-- CONTAINER PRINCIPAL -->
<div class="container">
    <!-- FILTROS -->
    <div class="filters">
        <div class="filter-group">
            <label class="filter-label">Período</label>
            <select class="filter-select" id="periodFilter">
                <option value="today">Hoje</option>
                <option value="week">Esta Semana</option>
                <option value="month" selected>Este Mês</option>
                <option value="quarter">Este Trimestre</option>
                <option value="year">Este Ano</option>
            </select>
        </div>
        <div class="filter-group">
            <label class="filter-label">Data Inicial</label>
            <input type="date" class="filter-input" id="startDate">
        </div>
        <div class="filter-group">
            <label class="filter-label">Data Final</label>
            <input type="date" class="filter-input" id="endDate">
        </div>
        <div class="filter-group">
            <label class="filter-label">Tipo</label>
            <select class="filter-select" id="typeFilter">
                <option value="all">Todos</option>
                <option value="users">Usuários</option>
                <option value="companies">Empresas</option>
                <option value="promotions">Promoções</option>
            </select>
        </div>
        <div class="filter-group" style="justify-content: flex-end;">
            <button class="filter-btn" onclick="applyFilters()">
                <i class="fas fa-search"></i>
                Aplicar Filtros
            </button>
        </div>
    </div>

    <!-- ESTATÍSTICAS PRINCIPAIS -->
    <div class="stats">
        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-users"></i>
            </div>
            <div class="stat-value" id="totalUsers">847</div>
            <div class="stat-label">Total de Usuários</div>
            <div class="stat-change positive">
                <i class="fas fa-arrow-up"></i>
                +12.5% vs mês anterior
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon" style="background: var(--vivo-green);">
                <i class="fas fa-building"></i>
            </div>
            <div class="stat-value" id="totalCompanies">156</div>
            <div class="stat-label">Empresas Cadastradas</div>
            <div class="stat-change positive">
                <i class="fas fa-arrow-up"></i>
                +8.3% vs mês anterior
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon" style="background: var(--vivo-orange);">
                <i class="fas fa-tags"></i>
            </div>
            <div class="stat-value" id="activePromotions">89</div>
            <div class="stat-label">Promoções Ativas</div>
            <div class="stat-change positive">
                <i class="fas fa-arrow-up"></i>
                +15.7% vs mês anterior
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon" style="background: var(--vivo-blue);">
                <i class="fas fa-chart-line"></i>
            </div>
            <div class="stat-value" id="conversionRate">73.2%</div>
            <div class="stat-label">Taxa de Conversáo</div>
            <div class="stat-change negative">
                <i class="fas fa-arrow-down"></i>
                -2.1% vs mês anterior
            </div>
        </div>
    </div>

    <!-- GRÁFICOS -->
    <div class="charts-section">
        <div class="chart-card">
            <h3 class="chart-title">
                <i class="fas fa-chart-line"></i>
                Crescimento de Usuários
            </h3>
            <div class="chart-container">
                <canvas id="usersChart"></canvas>
            </div>
        </div>
        <div class="chart-card">
            <h3 class="chart-title">
                <i class="fas fa-chart-pie"></i>
                Distribuiçáo por Tipo
            </h3>
            <div class="chart-container">
                <canvas id="distributionChart"></canvas>
            </div>
        </div>
    </div>

    <!-- TABELA DE MÉTRICAS -->
    <div class="table-section">
        <div class="table-header">
            <h3 class="table-title">
                <i class="fas fa-table"></i>
                Métricas Detalhadas
            </h3>
            <button class="export-btn" onclick="exportData()">
                <i class="fas fa-download"></i>
                Exportar Dados
            </button>
        </div>
        <div class="table-container">
            <table class="report-table">
                <thead>
                    <tr>
                        <th>Métrica</th>
                        <th>Valor Atual</th>
                        <th>Período Anterior</th>
                        <th>Variaçáo</th>
                        <th>Tendência</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Novos Usuários</td>
                        <td class="metric-value">125</td>
                        <td>98</td>
                        <td class="metric-positive">+27.6%</td>
                        <td><i class="fas fa-trending-up" style="color: var(--vivo-green);"></i></td>
                    </tr>
                    <tr>
                        <td>Empresas Ativas</td>
                        <td class="metric-value">142</td>
                        <td>138</td>
                        <td class="metric-positive">+2.9%</td>
                        <td><i class="fas fa-trending-up" style="color: var(--vivo-green);"></i></td>
                    </tr>
                    <tr>
                        <td>Promoções Criadas</td>
                        <td class="metric-value">34</td>
                        <td>41</td>
                        <td class="metric-negative">-17.1%</td>
                        <td><i class="fas fa-trending-down" style="color: var(--vivo-red);"></i></td>
                    </tr>
                    <tr>
                        <td>Engajamento</td>
                        <td class="metric-value">68.4%</td>
                        <td>71.2%</td>
                        <td class="metric-negative">-3.9%</td>
                        <td><i class="fas fa-trending-down" style="color: var(--vivo-red);"></i></td>
                    </tr>
                    <tr>
                        <td>Receita Estimada</td>
                        <td class="metric-value">R$ 45.672</td>
                        <td>R$ 38.945</td>
                        <td class="metric-positive">+17.3%</td>
                        <td><i class="fas fa-trending-up" style="color: var(--vivo-green);"></i></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<script>
// Inicializaçáo da página
window.addEventListener('DOMContentLoaded', function() {
    console.log('Página de relatórios carregada');
    
    // Configurar datas padráo
    const today = new Date();
    const firstDayOfMonth = new Date(today.getFullYear(), today.getMonth(), 1);
    
    document.getElementById('startDate').valueAsDate = firstDayOfMonth;
    document.getElementById('endDate').valueAsDate = today;
    
    // Inicializar gráficos
    initializeCharts();
});

// Inicializaçáo dos gráficos
function initializeCharts() {
    // Gráfico de crescimento de usuários
    const usersCtx = document.getElementById('usersChart').getContext('2d');
    new Chart(usersCtx, {
        type: 'line',
        data: {
            labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'],
            datasets: [{
                label: 'Usuários',
                data: [45, 52, 68, 71, 83, 95, 102, 115, 127, 138, 145, 156],
                borderColor: '#6F1AB6',
                backgroundColor: 'rgba(111, 26, 182, 0.1)',
                fill: true,
                tension: 0.4
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: false
                }
            },
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });

    // Gráfico de distribuiçáo por tipo
    const distributionCtx = document.getElementById('distributionChart').getContext('2d');
    new Chart(distributionCtx, {
        type: 'doughnut',
        data: {
            labels: ['Clientes', 'Empresas', 'Administradores'],
            datasets: [{
                data: [678, 156, 13],
                backgroundColor: [
                    '#3B82F6',
                    '#10B981', 
                    '#6F1AB6'
                ]
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'bottom'
                }
            }
        }
    });
}

// Aplicar filtros
function applyFilters() {
    const period = document.getElementById('periodFilter').value;
    const startDate = document.getElementById('startDate').value;
    const endDate = document.getElementById('endDate').value;
    const type = document.getElementById('typeFilter').value;
    
    console.log('Aplicando filtros:', { period, startDate, endDate, type });
    
    // Aqui você implementaria a lógica para filtrar os dados
    // Por enquanto, apenas mostra um alerta
    alert(`Filtros aplicados:\nPeríodo: ${period}\nData Inicial: ${startDate}\nData Final: ${endDate}\nTipo: ${type}`);
}

// Exportar dados
function exportData() {
    alert('Exportando dados para CSV... (Funcionalidade em desenvolvimento)');
    
    // Aqui você implementaria a exportaçáo real dos dados
    // Por exemplo, gerando um arquivo CSV ou Excel
}

// Atualizar dados em tempo real (simulado)
function updateMetrics() {
    // Simula atualizações em tempo real dos dados
    const elements = ['totalUsers', 'totalCompanies', 'activePromotions', 'conversionRate'];
    
    elements.forEach(id => {
        const element = document.getElementById(id);
        if (element) {
            // Adiciona uma pequena variaçáo aleatória aos valores
            const currentValue = parseFloat(element.textContent.replace(/[^\d.]/g, ''));
            const variation = (Math.random() - 0.5) * 0.02; // ±1% de variaçáo
            const newValue = currentValue * (1 + variation);
            
            if (id === 'conversionRate') {
                element.textContent = newValue.toFixed(1) + '%';
            } else {
                element.textContent = Math.round(newValue);
            }
        }
    });
}

// Atualizar métricas a cada 30 segundos (simulaçáo)
setInterval(updateMetrics, 30000);
</script>
</body>
</html>


                    </div>
                    <div class="stat-trend positive">

</body>
</html>


