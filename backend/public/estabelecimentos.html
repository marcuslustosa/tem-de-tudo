<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estabelecimentos - Tem de Tudo</title>
    
    <!-- Meta Tags PWA -->
    <meta name="description" content="Descubra estabelecimentos parceiros onde você pode acumular pontos">
    <meta name="theme-color" content="#4c1d95">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <!-- Fallback Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.4.0/css/all.css" crossorigin="anonymous">
    
    <!-- Icons -->
    <link rel="icon" type="image/png" href="/frontend/img/logo.png">
    <link rel="apple-touch-icon" href="/frontend/img/logo.png">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="/css/modern-theme.css">
    
    <!-- Manifest PWA -->
    <link rel="manifest" href="/manifest.json">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header glass-header">
            <div class="header-container">
                <a href="/" class="logo">
                    <img src="/frontend/img/logo.png" alt="Tem de Tudo" class="logo-image">
                </a>
                
                <nav class="nav-menu">
                    <a href="/"><i class="fas fa-home icon-sm"></i> Início</a>
                    <a href="/estabelecimentos.html" class="active"><i class="fas fa-store icon-sm"></i> Estabelecimentos</a>
                    <a href="/contato.html"><i class="fas fa-envelope icon-sm"></i> Contato</a>
                    <a href="/login.html"><i class="fas fa-sign-in-alt icon-sm"></i> Login</a>
                    <a href="/register.html"><i class="fas fa-user-plus icon-sm"></i> Cadastro</a>
                </nav>
                
                <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </header>

        <!-- Mobile Navigation -->
        <div class="mobile-nav" id="mobileNav">
            <div class="mobile-nav-menu">
                <a href="/"><i class="fas fa-home icon-sm"></i> Início</a>
                <a href="/estabelecimentos.html" class="active"><i class="fas fa-store icon-sm"></i> Estabelecimentos</a>
                <a href="/contato.html"><i class="fas fa-envelope icon-sm"></i> Contato</a>
                <a href="/login.html"><i class="fas fa-sign-in-alt icon-sm"></i> Login</a>
                <a href="/register.html"><i class="fas fa-user-plus icon-sm"></i> Cadastro</a>
            </div>
        </div>

        <!-- Main Content -->
        <main class="app-main">
            <!-- Hero Section -->
            <section style="background: var(--gradient-primary); color: white; padding: var(--space-12) var(--space-6); text-align: center;">
                <div style="max-width: 800px; margin: 0 auto;">
                    <h1 style="font-size: 2.5rem; font-weight: 800; margin-bottom: 1rem;">Estabelecimentos Parceiros</h1>
                    <p style="font-size: 1.25rem; opacity: 0.9; margin-bottom: 2rem;">Mais de 50 estabelecimentos onde você acumula pontos em cada compra</p>
                    
                    <!-- Search Bar -->
                    <div style="position: relative; max-width: 600px; margin: 0 auto;">
                        <input 
                            type="text" 
                            id="searchInput"
                            placeholder="Buscar por nome ou categoria..." 
                            style="width: 100%; padding: 1rem 1rem 1rem 3rem; border: none; border-radius: var(--radius-lg); font-size: 1rem; background: rgba(255,255,255,0.95); backdrop-filter: blur(8px);"
                        >
                        <i class="fas fa-search" style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: var(--gray-500);"></i>
                    </div>
                </div>
            </section>

            <!-- Filters -->
            <section style="padding: var(--space-8) var(--space-6) var(--space-4);">
                <div style="max-width: 1200px; margin: 0 auto;">
                    <!-- Category Filters -->
                    <div style="display: flex; gap: var(--space-3); flex-wrap: wrap; justify-content: center; margin-bottom: var(--space-6);">
                        <button class="filter-chip active" data-filter="all" onclick="setFilter('all')">
                            <i class="fas fa-th-large icon-sm"></i> Todos
                        </button>
                        <button class="filter-chip" data-filter="restaurantes" onclick="setFilter('restaurantes')">
                            <i class="fas fa-utensils icon-sm"></i> Restaurantes
                        </button>
                        <button class="filter-chip" data-filter="lojas" onclick="setFilter('lojas')">
                            <i class="fas fa-shopping-bag icon-sm"></i> Lojas
                        </button>
                        <button class="filter-chip" data-filter="servicos" onclick="setFilter('servicos')">
                            <i class="fas fa-tools icon-sm"></i> Serviços
                        </button>
                        <button class="filter-chip" data-filter="farmacias" onclick="setFilter('farmacias')">
                            <i class="fas fa-pills icon-sm"></i> Farmácias
                        </button>
                    </div>

                    <!-- Advanced Filters -->
                    <div style="background: white; padding: var(--space-6); border-radius: var(--radius-lg); box-shadow: var(--shadow-md); margin-bottom: var(--space-6);">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--space-4); align-items: center;">
                            <!-- Sort By -->
                            <div>
                                <label style="display: block; font-weight: 600; color: var(--gray-700); margin-bottom: 0.5rem;">
                                    <i class="fas fa-sort icon-sm"></i> Ordenar por:
                                </label>
                                <select id="sortBy" onchange="applySorting()" style="width: 100%; padding: 0.75rem; border: 1px solid var(--gray-300); border-radius: var(--radius-md); background: white;">
                                    <option value="relevance">Relevância</option>
                                    <option value="rating">Melhor Avaliação</option>
                                    <option value="points">Mais Pontos</option>
                                    <option value="visits">Mais Visitados</option>
                                    <option value="newest">Mais Recentes</option>
                                    <option value="alphabetical">A-Z</option>
                                </select>
                            </div>

                            <!-- Rating Filter -->
                            <div>
                                <label style="display: block; font-weight: 600; color: var(--gray-700); margin-bottom: 0.5rem;">
                                    <i class="fas fa-star icon-sm"></i> Avaliação mínima:
                                </label>
                                <select id="minRating" onchange="applyFilters()" style="width: 100%; padding: 0.75rem; border: 1px solid var(--gray-300); border-radius: var(--radius-md); background: white;">
                                    <option value="0">Todas</option>
                                    <option value="3">3+ estrelas</option>
                                    <option value="4">4+ estrelas</option>
                                    <option value="4.5">4.5+ estrelas</option>
                                </select>
                            </div>

                            <!-- Points Multiplier -->
                            <div>
                                <label style="display: block; font-weight: 600; color: var(--gray-700); margin-bottom: 0.5rem;">
                                    <i class="fas fa-coins icon-sm"></i> Multiplicador:
                                </label>
                                <select id="pointsMultiplier" onchange="applyFilters()" style="width: 100%; padding: 0.75rem; border: 1px solid var(--gray-300); border-radius: var(--radius-md); background: white;">
                                    <option value="0">Todos</option>
                                    <option value="1.5">1.5x ou mais</option>
                                    <option value="2">2x ou mais</option>
                                    <option value="3">3x ou mais</option>
                                </select>
                            </div>

                            <!-- Distance Filter -->
                            <div>
                                <label style="display: block; font-weight: 600; color: var(--gray-700); margin-bottom: 0.5rem;">
                                    <i class="fas fa-map-marker-alt icon-sm"></i> Distância:
                                </label>
                                <select id="distance" onchange="applyFilters()" style="width: 100%; padding: 0.75rem; border: 1px solid var(--gray-300); border-radius: var(--radius-md); background: white;">
                                    <option value="all">Todas</option>
                                    <option value="1">Até 1km</option>
                                    <option value="3">Até 3km</option>
                                    <option value="5">Até 5km</option>
                                    <option value="10">Até 10km</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Results Info -->
                        <div style="margin-top: var(--space-4); padding-top: var(--space-4); border-top: 1px solid var(--gray-200); display: flex; justify-content: between; align-items: center; flex-wrap: wrap; gap: var(--space-3);">
                            <span id="resultsCount" style="color: var(--gray-600); font-size: 0.875rem;">
                                <i class="fas fa-info-circle icon-sm"></i> Mostrando todos os estabelecimentos
                            </span>
                            <button onclick="clearFilters()" style="background: none; border: 1px solid var(--gray-300); color: var(--gray-600); padding: 0.5rem 1rem; border-radius: var(--radius-md); cursor: pointer; font-size: 0.875rem;">
                                <i class="fas fa-times icon-sm"></i> Limpar filtros
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Establishments Grid -->
            <section style="padding: 0 var(--space-6) var(--space-16);">
                <div style="max-width: 1200px; margin: 0 auto;">
                    <div class="establishments-grid" id="establishmentsGrid">

                        <!-- Burger House -->
                        <div class="card establishment-card" data-category="restaurantes" data-rating="4.9" data-points="1.5" data-visits="2847" data-distance="1.2">
                            <div style="position: relative; height: 200px; background: linear-gradient(135deg, #f59e0b, #f97316); overflow: hidden;">
                                <img src="https://images.unsplash.com/photo-1571091718767-18b5b1457add?w=400&h=200&fit=crop&crop=center" style="width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0;">
                                <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, rgba(245,158,11,0.8), rgba(249,115,22,0.8));"></div>
                                <div style="position: absolute; top: 1rem; left: 1rem; width: 60px; height: 60px; border-radius: 50%; overflow: hidden; border: 3px solid white; background: white;">
                                    <img src="https://images.unsplash.com/photo-1586190848861-99aa4a171e90?w=60&h=60&fit=crop&crop=center" style="width: 100%; height: 100%; object-fit: cover;">
                                </div>
                                <div style="position: absolute; top: 1rem; right: 1rem; display: flex; gap: 0.5rem;">
                                    <button onclick="toggleFavorite('burger-house')" style="background: rgba(255,255,255,0.9); padding: 0.5rem; border: none; border-radius: var(--radius-md); backdrop-filter: blur(8px); cursor: pointer;">
                                        <i class="fas fa-heart" style="color: var(--gray-400);" id="fav-burger-house"></i>
                                    </button>
                                    <div style="background: rgba(255,255,255,0.9); padding: 0.5rem; border-radius: var(--radius-md); backdrop-filter: blur(8px); display: flex; align-items: center; gap: 0.25rem;">
                                        <i class="fas fa-eye" style="color: var(--primary-purple); font-size: 0.75rem;"></i>
                                        <span style="font-size: 0.75rem; font-weight: 600;">2.8k</span>
                                    </div>
                                </div>
                                <div style="position: absolute; bottom: 1rem; left: 1rem; color: white;">
                                    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                        <div style="display: flex; align-items: center; gap: 0.25rem;">
                                            <i class="fas fa-star" style="color: #fbbf24;"></i>
                                            <i class="fas fa-star" style="color: #fbbf24;"></i>
                                            <i class="fas fa-star" style="color: #fbbf24;"></i>
                                            <i class="fas fa-star" style="color: #fbbf24;"></i>
                                            <i class="fas fa-star" style="color: #fbbf24;"></i>
                                        </div>
                                        <span style="font-weight: 600;">4.9</span>
                                        <span style="color: rgba(255,255,255,0.8); font-size: 0.875rem;">(284 avaliações)</span>
                                        <span style="background: rgba(255,255,255,0.2); padding: 0.25rem 0.5rem; border-radius: var(--radius-sm); font-size: 0.875rem;">+1.5x pontos</span>
                                    </div>
                                </div>
                            </div>
                            <div style="padding: var(--space-6);">
                                <div style="margin-bottom: 1rem;">
                                    <h3 style="font-size: 1.5rem; font-weight: 700; color: var(--primary-purple); margin-bottom: 0.5rem;">Burger House</h3>
                                    <p style="color: var(--gray-600); font-size: 0.875rem; margin-bottom: 0.5rem;">Hamburgueria • Fast Food • 1.2km</p>
                                    <p style="color: var(--gray-700); line-height: 1.5; margin-bottom: 1rem;">Os melhores hambúrgueres artesanais da cidade com ingredientes premium e molhos especiais.</p>
                                    
                                    <!-- Latest Reviews Preview -->
                                    <div style="background: var(--gray-50); padding: 0.75rem; border-radius: var(--radius-md); margin-bottom: 1rem;">
                                        <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                            <img src="https://images.unsplash.com/photo-1494790108755-2616b332c108?w=24&h=24&fit=crop&crop=face" style="width: 24px; height: 24px; border-radius: 50%;">
                                            <span style="font-size: 0.875rem; font-weight: 600;">Maria Silva</span>
                                            <div style="display: flex; gap: 0.125rem;">
                                                <i class="fas fa-star" style="color: #fbbf24; font-size: 0.75rem;"></i>
                                                <i class="fas fa-star" style="color: #fbbf24; font-size: 0.75rem;"></i>
                                                <i class="fas fa-star" style="color: #fbbf24; font-size: 0.75rem;"></i>
                                                <i class="fas fa-star" style="color: #fbbf24; font-size: 0.75rem;"></i>
                                                <i class="fas fa-star" style="color: #fbbf24; font-size: 0.75rem;"></i>
                                            </div>
                                        </div>
                                        <p style="font-size: 0.875rem; color: var(--gray-600); line-height: 1.4;">"Hambúrguer delicioso e atendimento excelente! Super recomendo."</p>
                                    </div>
                                </div>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem; padding: 1rem; background: var(--gray-50); border-radius: var(--radius-lg);">
                                    <div style="text-align: center;">
                                        <i class="fas fa-clock" style="color: var(--primary-purple); margin-bottom: 0.5rem;"></i>
                                        <p style="font-size: 0.875rem; color: var(--gray-600);">⏱️ 25-35 min</p>
                                    </div>
                                    <div style="text-align: center;">
                                        <i class="fas fa-coins" style="color: var(--accent-orange); margin-bottom: 0.5rem;"></i>
                                        <p style="font-size: 0.875rem; color: var(--gray-600);">💰 R$10 = 15 pontos</p>
                                    </div>
                                </div>
                                
                                <div style="display: flex; gap: var(--space-3); flex-wrap: wrap;">
                                    <button class="btn btn-primary btn-sm" onclick="showMenu('burger-house')">
                                        <i class="fas fa-utensils"></i> Ver Cardápio
                                    </button>
                                    <button class="btn btn-outline btn-sm" onclick="visitEstablishment('burger-house')">
                                        <i class="fas fa-map-marker-alt"></i> Visitar
                                    </button>
                                    <button class="btn btn-outline btn-sm" onclick="showReviews('burger-house')">
                                        <i class="fas fa-star"></i> Avaliar
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Fashion Store -->
                        <div class="card establishment-card" data-category="lojas" data-rating="4.7" data-points="3.0" data-visits="1923" data-distance="0.8">
                            <div style="position: relative; height: 200px; background: linear-gradient(135deg, #ec4899, #f472b6); overflow: hidden;">
                                <img src="https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=400&h=200&fit=crop&crop=center" style="width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0;">
                                <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, rgba(236,72,153,0.8), rgba(244,114,182,0.8));"></div>
                                <div style="position: absolute; top: 1rem; left: 1rem; width: 60px; height: 60px; border-radius: 50%; overflow: hidden; border: 3px solid white; background: white;">
                                    <img src="https://images.unsplash.com/photo-1523381210434-271e8be1f52b?w=60&h=60&fit=crop&crop=center" style="width: 100%; height: 100%; object-fit: cover;">
                                </div>
                                <div style="position: absolute; top: 1rem; right: 1rem; display: flex; gap: 0.5rem;">
                                    <button onclick="toggleFavorite('fashion-store')" style="background: rgba(255,255,255,0.9); padding: 0.5rem; border: none; border-radius: var(--radius-md); backdrop-filter: blur(8px); cursor: pointer;">
                                        <i class="fas fa-heart" style="color: var(--gray-400);" id="fav-fashion-store"></i>
                                    </button>
                                    <div style="background: rgba(255,255,255,0.9); padding: 0.5rem; border-radius: var(--radius-md); backdrop-filter: blur(8px); display: flex; align-items: center; gap: 0.25rem;">
                                        <i class="fas fa-eye" style="color: var(--primary-purple); font-size: 0.75rem;"></i>
                                        <span style="font-size: 0.75rem; font-weight: 600;">1.9k</span>
                                    </div>
                                </div>
                                <div style="position: absolute; bottom: 1rem; left: 1rem; color: white;">
                                    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                        <div style="display: flex; align-items: center; gap: 0.25rem;">
                                            <i class="fas fa-star" style="color: #fbbf24;"></i>
                                            <i class="fas fa-star" style="color: #fbbf24;"></i>
                                            <i class="fas fa-star" style="color: #fbbf24;"></i>
                                            <i class="fas fa-star" style="color: #fbbf24;"></i>
                                            <i class="fas fa-star-half-alt" style="color: #fbbf24;"></i>
                                        </div>
                                        <span style="font-weight: 600;">4.7</span>
                                        <span style="color: rgba(255,255,255,0.8); font-size: 0.875rem;">(158 avaliações)</span>
                                        <span style="background: rgba(255,255,255,0.2); padding: 0.25rem 0.5rem; border-radius: var(--radius-sm); font-size: 0.875rem;">+3x pontos</span>
                                    </div>
                                </div>
                            </div>
                            <div style="padding: var(--space-6);">
                                <div style="margin-bottom: 1rem;">
                                    <h3 style="font-size: 1.5rem; font-weight: 700; color: var(--primary-purple); margin-bottom: 0.5rem;">Fashion Store</h3>
                                    <p style="color: var(--gray-600); font-size: 0.875rem; margin-bottom: 0.5rem;">Roupas • Acessórios • 0.8km</p>
                                    <p style="color: var(--gray-700); line-height: 1.5; margin-bottom: 1rem;">Moda jovem e moderna com as últimas tendências nacionais e importadas. Peças exclusivas e preços acessíveis.</p>
                                    
                                    <!-- Latest Reviews Preview -->
                                    <div style="background: var(--gray-50); padding: 0.75rem; border-radius: var(--radius-md); margin-bottom: 1rem;">
                                        <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                            <img src="https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=24&h=24&fit=crop&crop=face" style="width: 24px; height: 24px; border-radius: 50%;">
                                            <span style="font-size: 0.875rem; font-weight: 600;">Ana Costa</span>
                                            <div style="display: flex; gap: 0.125rem;">
                                                <i class="fas fa-star" style="color: #fbbf24; font-size: 0.75rem;"></i>
                                                <i class="fas fa-star" style="color: #fbbf24; font-size: 0.75rem;"></i>
                                                <i class="fas fa-star" style="color: #fbbf24; font-size: 0.75rem;"></i>
                                                <i class="fas fa-star" style="color: #fbbf24; font-size: 0.75rem;"></i>
                                                <i class="fas fa-star" style="color: #fbbf24; font-size: 0.75rem;"></i>
                                            </div>
                                        </div>
                                        <p style="font-size: 0.875rem; color: var(--gray-600); line-height: 1.4;">"Roupas lindas e de qualidade! Sempre encontro peças únicas aqui."</p>
                                    </div>
                                </div>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem; padding: 1rem; background: var(--gray-50); border-radius: var(--radius-lg);">
                                    <div style="text-align: center;">
                                        <i class="fas fa-map-marker-alt" style="color: var(--primary-purple); margin-bottom: 0.5rem;"></i>
                                        <p style="font-size: 0.875rem; color: var(--gray-600);">📍 Centro</p>
                                    </div>
                                    <div style="text-align: center;">
                                        <i class="fas fa-coins" style="color: var(--accent-orange); margin-bottom: 0.5rem;"></i>
                                        <p style="font-size: 0.875rem; color: var(--gray-600);">💰 R$20 = 60 pontos</p>
                                    </div>
                                </div>
                                
                                <div style="display: flex; gap: var(--space-3); flex-wrap: wrap;">
                                    <button class="btn btn-primary btn-sm" onclick="showProducts('fashion-store')">
                                        <i class="fas fa-shopping-bag"></i> Ver Produtos
                                    </button>
                                    <button class="btn btn-outline btn-sm" onclick="visitEstablishment('fashion-store')">
                                        <i class="fas fa-store"></i> Visitar Loja
                                    </button>
                                    <button class="btn btn-outline btn-sm" onclick="showReviews('fashion-store')">
                                        <i class="fas fa-star"></i> Avaliar
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Tech Store Premium -->
                        <div class="card establishment-card" data-category="lojas" data-rating="4.8" data-points="2.5" data-visits="3245" data-distance="2.1">
                            <div style="position: relative; height: 200px; background: linear-gradient(135deg, #1e40af, #3b82f6); overflow: hidden;">
                                <img src="https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400&h=200&fit=crop&crop=center" style="width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0;">
                                <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, rgba(30,64,175,0.8), rgba(59,130,246,0.8));"></div>
                                <div style="position: absolute; top: 1rem; left: 1rem; width: 60px; height: 60px; border-radius: 50%; overflow: hidden; border: 3px solid white; background: white;">
                                    <img src="https://images.unsplash.com/photo-1531297484001-80022131f5a1?w=60&h=60&fit=crop&crop=center" style="width: 100%; height: 100%; object-fit: cover;">
                                </div>
                                <div style="position: absolute; top: 1rem; right: 1rem; display: flex; gap: 0.5rem;">
                                    <button onclick="toggleFavorite('tech-store')" style="background: rgba(255,255,255,0.9); padding: 0.5rem; border: none; border-radius: var(--radius-md); backdrop-filter: blur(8px); cursor: pointer;">
                                        <i class="fas fa-heart" style="color: var(--gray-400);" id="fav-tech-store"></i>
                                    </button>
                                    <div style="background: rgba(255,255,255,0.9); padding: 0.5rem; border-radius: var(--radius-md); backdrop-filter: blur(8px); display: flex; align-items: center; gap: 0.25rem;">
                                        <i class="fas fa-eye" style="color: var(--primary-purple); font-size: 0.75rem;"></i>
                                        <span style="font-size: 0.75rem; font-weight: 600;">3.2k</span>
                                    </div>
                                </div>
                                <div style="position: absolute; bottom: 1rem; left: 1rem; color: white;">
                                    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                        <div style="display: flex; align-items: center; gap: 0.25rem;">
                                            <i class="fas fa-star" style="color: #fbbf24;"></i>
                                            <i class="fas fa-star" style="color: #fbbf24;"></i>
                                            <i class="fas fa-star" style="color: #fbbf24;"></i>
                                            <i class="fas fa-star" style="color: #fbbf24;"></i>
                                            <i class="fas fa-star" style="color: #fbbf24;"></i>
                                        </div>
                                        <span style="font-weight: 600;">4.8</span>
                                        <span style="color: rgba(255,255,255,0.8); font-size: 0.875rem;">(241 avaliações)</span>
                                        <span style="background: rgba(255,255,255,0.2); padding: 0.25rem 0.5rem; border-radius: var(--radius-sm); font-size: 0.875rem;">+2.5x pontos</span>
                                    </div>
                                </div>
                            </div>
                            <div style="padding: var(--space-6);">
                                <div style="margin-bottom: 1rem;">
                                    <h3 style="font-size: 1.5rem; font-weight: 700; color: var(--primary-purple); margin-bottom: 0.5rem;">Tech Store Premium</h3>
                                    <p style="color: var(--gray-600); font-size: 0.875rem; margin-bottom: 0.5rem;">Eletrônicos • Celulares • 2.1km</p>
                                    <p style="color: var(--gray-700); line-height: 1.5; margin-bottom: 1rem;">Loja premium de tecnologia com os últimos lançamentos em smartphones, laptops e acessórios. Garantia estendida e suporte técnico especializado.</p>
                                    
                                    <!-- Latest Reviews Preview -->
                                    <div style="background: var(--gray-50); padding: 0.75rem; border-radius: var(--radius-md); margin-bottom: 1rem;">
                                        <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                            <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=24&h=24&fit=crop&crop=face" style="width: 24px; height: 24px; border-radius: 50%;">
                                            <span style="font-size: 0.875rem; font-weight: 600;">Rafael Santos</span>
                                            <div style="display: flex; gap: 0.125rem;">
                                                <i class="fas fa-star" style="color: #fbbf24; font-size: 0.75rem;"></i>
                                                <i class="fas fa-star" style="color: #fbbf24; font-size: 0.75rem;"></i>
                                                <i class="fas fa-star" style="color: #fbbf24; font-size: 0.75rem;"></i>
                                                <i class="fas fa-star" style="color: #fbbf24; font-size: 0.75rem;"></i>
                                                <i class="fas fa-star" style="color: #fbbf24; font-size: 0.75rem;"></i>
                                            </div>
                                        </div>
                                        <p style="font-size: 0.875rem; color: var(--gray-600); line-height: 1.4;">"Melhor loja de tecnologia da cidade! Preços justos e atendimento excepcional."</p>
                                    </div>
                                </div>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem; padding: 1rem; background: var(--gray-50); border-radius: var(--radius-lg);">
                                    <div style="text-align: center;">
                                        <i class="fas fa-shipping-fast" style="color: var(--primary-purple); margin-bottom: 0.5rem;"></i>
                                        <p style="font-size: 0.875rem; color: var(--gray-600);">🚚 Entrega grátis</p>
                                    </div>
                                    <div style="text-align: center;">
                                        <i class="fas fa-coins" style="color: var(--accent-orange); margin-bottom: 0.5rem;"></i>
                                        <p style="font-size: 0.875rem; color: var(--gray-600);">💰 R$50 = 125 pontos</p>
                                    </div>
                                </div>
                                
                                <div style="display: flex; gap: var(--space-3); flex-wrap: wrap;">
                                    <button class="btn btn-primary btn-sm" onclick="showProducts('tech-store')">
                                        <i class="fas fa-mobile-alt"></i> Ver Produtos
                                    </button>
                                    <button class="btn btn-outline btn-sm" onclick="visitEstablishment('tech-store')">
                                        <i class="fas fa-store"></i> Visitar Loja
                                    </button>
                                    <button class="btn btn-outline btn-sm" onclick="showReviews('tech-store')">
                                        <i class="fas fa-star"></i> Avaliar
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Pizzaria Nonna -->
                        <div class="card establishment-card" data-category="restaurantes" data-rating="4.6" data-points="2.0" data-visits="1567" data-distance="1.8">
                            <div style="position: relative; height: 200px; background: linear-gradient(135deg, #dc2626, #ef4444); overflow: hidden;">
                                <img src="https://images.unsplash.com/photo-1513104890138-7c749659a591?w=400&h=200&fit=crop&crop=center" style="width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0;">
                                <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, rgba(220,38,38,0.8), rgba(239,68,68,0.8));"></div>
                                <div style="position: absolute; top: 1rem; left: 1rem; width: 60px; height: 60px; border-radius: 50%; overflow: hidden; border: 3px solid white; background: white;">
                                    <img src="https://images.unsplash.com/photo-1571997478779-2adcbbe9ab2f?w=60&h=60&fit=crop&crop=center" style="width: 100%; height: 100%; object-fit: cover;">
                                </div>
                                <div style="position: absolute; top: 1rem; right: 1rem; display: flex; gap: 0.5rem;">
                                    <button onclick="toggleFavorite('pizzaria-nonna')" style="background: rgba(255,255,255,0.9); padding: 0.5rem; border: none; border-radius: var(--radius-md); backdrop-filter: blur(8px); cursor: pointer;">
                                        <i class="fas fa-heart" style="color: var(--gray-400);" id="fav-pizzaria-nonna"></i>
                                    </button>
                                    <div style="background: rgba(255,255,255,0.9); padding: 0.5rem; border-radius: var(--radius-md); backdrop-filter: blur(8px); display: flex; align-items: center; gap: 0.25rem;">
                                        <i class="fas fa-eye" style="color: var(--primary-purple); font-size: 0.75rem;"></i>
                                        <span style="font-size: 0.75rem; font-weight: 600;">1.6k</span>
                                    </div>
                                </div>
                                <div style="position: absolute; bottom: 1rem; left: 1rem; color: white;">
                                    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                        <div style="display: flex; align-items: center; gap: 0.25rem;">
                                            <i class="fas fa-star" style="color: #fbbf24;"></i>
                                            <i class="fas fa-star" style="color: #fbbf24;"></i>
                                            <i class="fas fa-star" style="color: #fbbf24;"></i>
                                            <i class="fas fa-star" style="color: #fbbf24;"></i>
                                            <i class="fas fa-star-half-alt" style="color: #fbbf24;"></i>
                                        </div>
                                        <span style="font-weight: 600;">4.6</span>
                                        <span style="color: rgba(255,255,255,0.8); font-size: 0.875rem;">(189 avaliações)</span>
                                        <span style="background: rgba(255,255,255,0.2); padding: 0.25rem 0.5rem; border-radius: var(--radius-sm); font-size: 0.875rem;">+2x pontos</span>
                                    </div>
                                </div>
                            </div>
                            <div style="padding: var(--space-6);">
                                <div style="margin-bottom: 1rem;">
                                    <h3 style="font-size: 1.5rem; font-weight: 700; color: var(--primary-purple); margin-bottom: 0.5rem;">Pizzaria Nonna</h3>
                                    <p style="color: var(--gray-600); font-size: 0.875rem; margin-bottom: 0.5rem;">Pizza • Italiana • 1.8km</p>
                                    <p style="color: var(--gray-700); line-height: 1.5; margin-bottom: 1rem;">Autêntica pizzaria italiana com receitas tradicionais da família. Massa artesanal e ingredientes importados direto da Itália.</p>
                                    
                                    <!-- Latest Reviews Preview -->
                                    <div style="background: var(--gray-50); padding: 0.75rem; border-radius: var(--radius-md); margin-bottom: 1rem;">
                                        <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                            <img src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=24&h=24&fit=crop&crop=face" style="width: 24px; height: 24px; border-radius: 50%;">
                                            <span style="font-size: 0.875rem; font-weight: 600;">Isabella Rossi</span>
                                            <div style="display: flex; gap: 0.125rem;">
                                                <i class="fas fa-star" style="color: #fbbf24; font-size: 0.75rem;"></i>
                                                <i class="fas fa-star" style="color: #fbbf24; font-size: 0.75rem;"></i>
                                                <i class="fas fa-star" style="color: #fbbf24; font-size: 0.75rem;"></i>
                                                <i class="fas fa-star" style="color: #fbbf24; font-size: 0.75rem;"></i>
                                                <i class="fas fa-star" style="color: #fbbf24; font-size: 0.75rem;"></i>
                                            </div>
                                        </div>
                                        <p style="font-size: 0.875rem; color: var(--gray-600); line-height: 1.4;">"Pizza maravilhosa! Me lembrou da Itália. Ambiente acolhedor e preços justos."</p>
                                    </div>
                                </div>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem; padding: 1rem; background: var(--gray-50); border-radius: var(--radius-lg);">
                                    <div style="text-align: center;">
                                        <i class="fas fa-clock" style="color: var(--primary-purple); margin-bottom: 0.5rem;"></i>
                                        <p style="font-size: 0.875rem; color: var(--gray-600);">🍕 30-40 min</p>
                                    </div>
                                    <div style="text-align: center;">
                                        <i class="fas fa-coins" style="color: var(--accent-orange); margin-bottom: 0.5rem;"></i>
                                        <p style="font-size: 0.875rem; color: var(--gray-600);">💰 R$15 = 30 pontos</p>
                                    </div>
                                </div>
                                
                                <div style="display: flex; gap: var(--space-3); flex-wrap: wrap;">
                                    <button class="btn btn-primary btn-sm" onclick="showMenu('pizzaria-nonna')">
                                        <i class="fas fa-pizza-slice"></i> Ver Cardápio
                                    </button>
                                    <button class="btn btn-outline btn-sm" onclick="orderOnline('pizzaria-nonna')">
                                        <i class="fas fa-motorcycle"></i> Delivery
                                    </button>
                                    <button class="btn btn-outline btn-sm" onclick="showReviews('pizzaria-nonna')">
                                        <i class="fas fa-star"></i> Avaliar
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Farmácia Saúde+ -->
                        <div class="card establishment-card" data-category="farmacias">
                            <div style="position: relative; height: 200px; background: linear-gradient(135deg, #059669, #10b981); overflow: hidden;">
                                <img src="https://images.unsplash.com/photo-1576091160399-112ba8d25d1f?w=400&h=200&fit=crop&crop=center" style="width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0;">
                                <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, rgba(5,150,105,0.8), rgba(16,185,129,0.8));"></div>
                                <div style="position: absolute; top: 1rem; left: 1rem; width: 60px; height: 60px; border-radius: 50%; overflow: hidden; border: 3px solid white; background: white;">
                                    <img src="https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=60&h=60&fit=crop&crop=center" style="width: 100%; height: 100%; object-fit: cover;">
                                </div>
                                <div style="position: absolute; top: 1rem; right: 1rem; background: rgba(255,255,255,0.9); padding: 0.5rem; border-radius: var(--radius-md); backdrop-filter: blur(8px);">
                                    <i class="fas fa-heart" style="color: var(--primary-purple);"></i>
                                </div>
                                <div style="position: absolute; bottom: 1rem; left: 1rem; color: white;">
                                    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                        <i class="fas fa-star" style="color: #fbbf24;"></i>
                                        <span style="font-weight: 600;">4.9</span>
                                        <span style="background: rgba(255,255,255,0.2); padding: 0.25rem 0.5rem; border-radius: var(--radius-sm); font-size: 0.875rem;">+2x pontos</span>
                                    </div>
                                </div>
                            </div>
                            <div style="padding: var(--space-6);">
                                <div style="margin-bottom: 1rem;">
                                    <h3 style="font-size: 1.5rem; font-weight: 700; color: var(--primary-purple); margin-bottom: 0.5rem;">Farmácia Saúde+</h3>
                                    <p style="color: var(--gray-600); font-size: 0.875rem; margin-bottom: 1rem;">Farmácia • Medicamentos</p>
                                    <p style="color: var(--gray-700); line-height: 1.5; margin-bottom: 1rem;">Medicamentos, produtos de higiene e suplementos com os melhores preços.</p>
                                </div>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem; padding: 1rem; background: var(--gray-50); border-radius: var(--radius-lg);">
                                    <div style="text-align: center;">
                                        <i class="fas fa-truck" style="color: var(--primary-purple); margin-bottom: 0.5rem;"></i>
                                        <p style="font-size: 0.875rem; color: var(--gray-600);">🚚 Delivery</p>
                                    </div>
                                    <div style="text-align: center;">
                                        <i class="fas fa-coins" style="color: var(--accent-orange); margin-bottom: 0.5rem;"></i>
                                        <p style="font-size: 0.875rem; color: var(--gray-600);">💰 R$5 = 15 pontos</p>
                                    </div>
                                </div>
                                
                                <div style="display: flex; gap: var(--space-3);">
                                    <button class="btn btn-success btn-sm" onclick="showProducts('farmacia-saude')">
                                        <i class="fas fa-pills"></i> Ver Produtos
                                    </button>
                                    <button class="btn btn-outline btn-sm" onclick="visitEstablishment('farmacia-saude')">
                                        <i class="fas fa-map-marker-alt"></i> Localizar
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Studio Hair -->
                        <div class="card establishment-card" data-category="servicos">
                            <div style="position: relative; height: 200px; background: linear-gradient(135deg, #8b5cf6, #a78bfa); overflow: hidden;">
                                <img src="https://images.unsplash.com/photo-1560066984-138dadb4c035?w=400&h=200&fit=crop&crop=center" style="width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0;">
                                <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, rgba(139,92,246,0.8), rgba(167,139,250,0.8));"></div>
                                <div style="position: absolute; top: 1rem; left: 1rem; width: 60px; height: 60px; border-radius: 50%; overflow: hidden; border: 3px solid white; background: white;">
                                    <img src="https://images.unsplash.com/photo-1522337360788-8b13dee7a37e?w=60&h=60&fit=crop&crop=center" style="width: 100%; height: 100%; object-fit: cover;">
                                </div>
                                <div style="position: absolute; top: 1rem; right: 1rem; background: rgba(255,255,255,0.9); padding: 0.5rem; border-radius: var(--radius-md); backdrop-filter: blur(8px);">
                                    <i class="fas fa-heart" style="color: var(--primary-purple);"></i>
                                </div>
                                <div style="position: absolute; bottom: 1rem; left: 1rem; color: white;">
                                    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                        <i class="fas fa-star" style="color: #fbbf24;"></i>
                                        <span style="font-weight: 600;">4.9</span>
                                        <span style="background: rgba(255,255,255,0.2); padding: 0.25rem 0.5rem; border-radius: var(--radius-sm); font-size: 0.875rem;">+2x pontos</span>
                                    </div>
                                </div>
                            </div>
                            <div style="padding: var(--space-6);">
                                <div style="margin-bottom: 1rem;">
                                    <h3 style="font-size: 1.5rem; font-weight: 700; color: var(--primary-purple); margin-bottom: 0.5rem;">Studio Hair</h3>
                                    <p style="color: var(--gray-600); font-size: 0.875rem; margin-bottom: 1rem;">Salão • Beleza</p>
                                    <p style="color: var(--gray-700); line-height: 1.5; margin-bottom: 1rem;">Cortes modernos, coloração e tratamentos com profissionais especializados.</p>
                                </div>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem; padding: 1rem; background: var(--gray-50); border-radius: var(--radius-lg);">
                                    <div style="text-align: center;">
                                        <i class="fas fa-calendar" style="color: var(--primary-purple); margin-bottom: 0.5rem;"></i>
                                        <p style="font-size: 0.875rem; color: var(--gray-600);">📅 Agendamento</p>
                                    </div>
                                    <div style="text-align: center;">
                                        <i class="fas fa-coins" style="color: var(--accent-orange); margin-bottom: 0.5rem;"></i>
                                        <p style="font-size: 0.875rem; color: var(--gray-600);">💰 R$15 = 30 pontos</p>
                                    </div>
                                </div>
                                
                                <div style="display: flex; gap: var(--space-3);">
                                    <button class="btn btn-accent btn-sm" onclick="showServices('studio-hair')">
                                        <i class="fas fa-cut"></i> Ver Serviços
                                    </button>
                                    <button class="btn btn-outline btn-sm" onclick="scheduleAppointment('studio-hair')">
                                        <i class="fas fa-calendar-plus"></i> Agendar
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Pizzaria Italiana -->
                        <div class="card establishment-card" data-category="restaurantes">
                            <div style="position: relative; height: 200px; background: linear-gradient(135deg, #dc2626, #ef4444); overflow: hidden;">
                                <img src="https://images.unsplash.com/photo-1513104890138-7c749659a591?w=400&h=200&fit=crop&crop=center" style="width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0;">
                                <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, rgba(220,38,38,0.8), rgba(239,68,68,0.8));"></div>
                                <div style="position: absolute; top: 1rem; left: 1rem; width: 60px; height: 60px; border-radius: 50%; overflow: hidden; border: 3px solid white; background: white;">
                                    <img src="https://images.unsplash.com/photo-1579952363873-27d3bfad9c0d?w=60&h=60&fit=crop&crop=center" style="width: 100%; height: 100%; object-fit: cover;">
                                </div>
                                <div style="position: absolute; top: 1rem; right: 1rem; background: rgba(255,255,255,0.9); padding: 0.5rem; border-radius: var(--radius-md); backdrop-filter: blur(8px);">
                                    <i class="fas fa-heart" style="color: var(--primary-purple);"></i>
                                </div>
                                <div style="position: absolute; bottom: 1rem; left: 1rem; color: white;">
                                    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                        <i class="fas fa-star" style="color: #fbbf24;"></i>
                                        <span style="font-weight: 600;">4.6</span>
                                        <span style="background: rgba(255,255,255,0.2); padding: 0.25rem 0.5rem; border-radius: var(--radius-sm); font-size: 0.875rem;">+1.5x pontos</span>
                                    </div>
                                </div>
                            </div>
                            <div style="padding: var(--space-6);">
                                <div style="margin-bottom: 1rem;">
                                    <h3 style="font-size: 1.5rem; font-weight: 700; color: var(--primary-purple); margin-bottom: 0.5rem;">Pizzaria Italiana</h3>
                                    <p style="color: var(--gray-600); font-size: 0.875rem; margin-bottom: 1rem;">Pizzaria • Italiana</p>
                                    <p style="color: var(--gray-700); line-height: 1.5; margin-bottom: 1rem;">Pizzas artesanais com massa fina e ingredientes importados da Itália.</p>
                                </div>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem; padding: 1rem; background: var(--gray-50); border-radius: var(--radius-lg);">
                                    <div style="text-align: center;">
                                        <i class="fas fa-clock" style="color: var(--primary-purple); margin-bottom: 0.5rem;"></i>
                                        <p style="font-size: 0.875rem; color: var(--gray-600);">⏱️ 30-45 min</p>
                                    </div>
                                    <div style="text-align: center;">
                                        <i class="fas fa-coins" style="color: var(--accent-orange); margin-bottom: 0.5rem;"></i>
                                        <p style="font-size: 0.875rem; color: var(--gray-600);">💰 R$25 = 25 pontos</p>
                                    </div>
                                </div>
                                
                                <div style="display: flex; gap: var(--space-3);">
                                    <button class="btn btn-primary btn-sm" onclick="showMenu('pizzaria-italiana')">
                                        <i class="fas fa-pizza-slice"></i> Ver Cardápio
                                    </button>
                                    <button class="btn btn-outline btn-sm" onclick="orderOnline('pizzaria-italiana')">
                                        <i class="fas fa-shopping-cart"></i> Pedir Online
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Tech Store -->
                        <div class="card establishment-card" data-category="lojas">
                            <div style="position: relative; height: 200px; background: linear-gradient(135deg, #1e40af, #3b82f6); overflow: hidden;">
                                <img src="https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=400&h=200&fit=crop&crop=center" style="width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0;">
                                <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, rgba(30,64,175,0.8), rgba(59,130,246,0.8));"></div>
                                <div style="position: absolute; top: 1rem; left: 1rem; width: 60px; height: 60px; border-radius: 50%; overflow: hidden; border: 3px solid white; background: white;">
                                    <img src="https://images.unsplash.com/photo-1531297484001-80022131f5a1?w=60&h=60&fit=crop&crop=center" style="width: 100%; height: 100%; object-fit: cover;">
                                </div>
                                <div style="position: absolute; top: 1rem; right: 1rem; background: rgba(255,255,255,0.9); padding: 0.5rem; border-radius: var(--radius-md); backdrop-filter: blur(8px);">
                                    <i class="fas fa-heart" style="color: var(--primary-purple);"></i>
                                </div>
                                <div style="position: absolute; bottom: 1rem; left: 1rem; color: white;">
                                    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                        <i class="fas fa-star" style="color: #fbbf24;"></i>
                                        <span style="font-weight: 600;">4.8</span>
                                        <span style="background: rgba(255,255,255,0.2); padding: 0.25rem 0.5rem; border-radius: var(--radius-sm); font-size: 0.875rem;">+2x pontos</span>
                                    </div>
                                </div>
                            </div>
                            <div style="padding: var(--space-6);">
                                <div style="margin-bottom: 1rem;">
                                    <h3 style="font-size: 1.5rem; font-weight: 700; color: var(--primary-purple); margin-bottom: 0.5rem;">Tech Store</h3>
                                    <p style="color: var(--gray-600); font-size: 0.875rem; margin-bottom: 1rem;">Eletrônicos • Tecnologia</p>
                                    <p style="color: var(--gray-700); line-height: 1.5; margin-bottom: 1rem;">Smartphones, notebooks e acessórios das principais marcas do mercado.</p>
                                </div>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem; padding: 1rem; background: var(--gray-50); border-radius: var(--radius-lg);">
                                    <div style="text-align: center;">
                                        <i class="fas fa-shipping-fast" style="color: var(--primary-purple); margin-bottom: 0.5rem;"></i>
                                        <p style="font-size: 0.875rem; color: var(--gray-600);">🚚 Entrega rápida</p>
                                    </div>
                                    <div style="text-align: center;">
                                        <i class="fas fa-coins" style="color: var(--accent-orange); margin-bottom: 0.5rem;"></i>
                                        <p style="font-size: 0.875rem; color: var(--gray-600);">💰 R$100 = 200 pontos</p>
                                    </div>
                                </div>
                                
                                <div style="display: flex; gap: var(--space-3);">
                                    <button class="btn btn-primary btn-sm" onclick="showProducts('tech-store')">
                                        <i class="fas fa-mobile-alt"></i> Ver Produtos
                                    </button>
                                    <button class="btn btn-outline btn-sm" onclick="visitEstablishment('tech-store')">
                                        <i class="fas fa-store"></i> Visitar Loja
                                    </button>
                                </div>
                            </div>
                        </div>

                    </div>
                    
                    <!-- Load More Button -->
                    <div style="text-align: center; margin-top: var(--space-12);">
                        <button id="loadMoreBtn" class="btn btn-outline btn-lg" onclick="loadMoreEstablishments()">
                            <i class="fas fa-plus"></i> Carregar Mais Estabelecimentos
                        </button>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer style="background: var(--gray-900); color: white; padding: var(--space-12) var(--space-6);">
            <div style="max-width: 1200px; margin: 0 auto; text-align: center;">
                <p>&copy; 2025 Tem de Tudo. Todos os direitos reservados.</p>
            </div>
        </footer>
    </div>

    <style>
        .filter-chip {
            padding: 0.75rem 1.5rem;
            border: 2px solid var(--gray-300);
            background: white;
            color: var(--gray-700);
            border-radius: var(--radius-full);
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition-fast);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .filter-chip:hover {
            border-color: var(--primary-purple);
            color: var(--primary-purple);
        }

        .filter-chip.active {
            background: var(--primary-purple);
            border-color: var(--primary-purple);
            color: white;
        }

        .establishments-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
        }

        .establishment-card {
            transition: all var(--transition-normal);
            cursor: pointer;
        }

        .establishment-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 50px rgba(76, 29, 149, 0.15);
        }

        .establishment-card.hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .establishments-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .nav-menu {
                display: none;
            }

            .mobile-menu-btn {
                display: flex;
            }
        }

        @media (min-width: 769px) {
            .nav-menu {
                display: flex;
            }

            .mobile-menu-btn {
                display: none;
            }
        }

        /* Animações do Modal */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        /* Responsivo para Modal */
        @media (max-width: 768px) {
            .lightbox-content {
                margin: 1rem !important;
                max-height: 95vh !important;
            }
            
            .lightbox-body {
                padding: 1.5rem !important;
            }
            
            .lightbox-header {
                padding: 1rem 1.5rem !important;
            }
        }
        
        /* Força a exibição dos ícones */
        .fas, .far, .fab {
            font-family: "Font Awesome 6 Free", "Font Awesome 6 Pro", "FontAwesome" !important;
            font-weight: 900 !important;
            display: inline-block !important;
            font-style: normal !important;
            font-variant: normal !important;
            text-rendering: auto !important;
            -webkit-font-smoothing: antialiased !important;
        }
        
        i[class*="fa-"] {
            display: inline-block !important;
            font-style: normal !important;
        }
    </style>

    <script>
        // Menu mobile
        function toggleMobileMenu() {
            const mobileNav = document.getElementById('mobileNav');
            mobileNav.classList.toggle('active');
        }

        // Filtros
        function setFilter(category) {
            // Atualizar botões ativos
            document.querySelectorAll('.filter-chip').forEach(chip => {
                chip.classList.remove('active');
            });
            document.querySelector(`[data-filter="${category}"]`).classList.add('active');

            // Filtrar cards
            const cards = document.querySelectorAll('.establishment-card');
            cards.forEach(card => {
                if (category === 'all' || card.dataset.category === category) {
                    card.classList.remove('hidden');
                } else {
                    card.classList.add('hidden');
                }
            });
        }

        // Busca
        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    const searchTerm = this.value.toLowerCase();
                    const cards = document.querySelectorAll('.establishment-card');
                    
                    cards.forEach(card => {
                        const title = card.querySelector('h3').textContent.toLowerCase();
                        const description = card.querySelector('p').textContent.toLowerCase();
                        
                        if (title.includes(searchTerm) || description.includes(searchTerm)) {
                            card.classList.remove('hidden');
                        } else {
                            card.classList.add('hidden');
                        }
                    });
                });
            }
        });

        // Dados fictícios dos estabelecimentos
        const establishmentMenus = {
            'burger-house': {
                name: 'Burger House',
                category: 'Cardápio',
                items: [
                    { name: 'Burger Clássico', price: 'R$ 24,90', points: 37, description: 'Blend 180g, queijo cheddar, alface, tomate, maionese especial' },
                    { name: 'X-Bacon Premium', price: 'R$ 32,90', points: 49, description: 'Blend 200g, bacon crocante, queijo suíço, cebola caramelizada' },
                    { name: 'Burger Vegetariano', price: 'R$ 28,90', points: 43, description: 'Hambúrguer de quinoa, queijo vegano, vegetais frescos' },
                    { name: 'Fritas Especiais', price: 'R$ 14,90', points: 22, description: 'Batatas rústicas com tempero da casa e maionese' },
                    { name: 'Onion Rings', price: 'R$ 12,90', points: 19, description: '8 unidades crocantes com molho barbecue' },
                    { name: 'Milk Shake Oreo', price: 'R$ 18,90', points: 28, description: 'Sorvete de baunilha, biscoito Oreo, chantilly' },
                    { name: 'Refrigerante 350ml', price: 'R$ 6,90', points: 10, description: 'Coca-Cola, Guaraná ou Fanta' },
                    { name: 'Combo Família', price: 'R$ 79,90', points: 120, description: '4 burgers + 2 fritas grandes + 4 refrigerantes' }
                ]
            },
            'fashion-store': {
                name: 'Fashion Store',
                category: 'Produtos',
                items: [
                    { name: 'Camiseta Básica', price: 'R$ 39,90', points: 40, description: '100% algodão, várias cores disponíveis' },
                    { name: 'Jeans Skinny', price: 'R$ 129,90', points: 195, description: 'Jeans premium com elastano, modelagem perfeita' },
                    { name: 'Vestido Floral', price: 'R$ 89,90', points: 135, description: 'Tecido leve, estampa exclusiva, tamanhos P ao GG' },
                    { name: 'Tênis Casual', price: 'R$ 199,90', points: 300, description: 'Confortável para o dia a dia, várias cores' },
                    { name: 'Bolsa de Mão', price: 'R$ 159,90', points: 240, description: 'Couro sintético, compartimentos internos' },
                    { name: 'Óculos de Sol', price: 'R$ 79,90', points: 120, description: 'Proteção UV 400, armação resistente' },
                    { name: 'Jaqueta Jeans', price: 'R$ 149,90', points: 225, description: 'Clássica, modelagem oversized' },
                    { name: 'Kit 3 Cuecas', price: 'R$ 49,90', points: 75, description: 'Algodão premium, elástico confortável' }
                ]
            },
            'farmacia-saude': {
                name: 'Farmácia Saúde+',
                category: 'Produtos',
                items: [
                    { name: 'Dipirona 500mg', price: 'R$ 8,90', points: 27, description: 'Caixa com 20 comprimidos - analgésico e antitérmico' },
                    { name: 'Vitamina C 1g', price: 'R$ 25,90', points: 78, description: 'Efervescente - 10 comprimidos, sabor laranja' },
                    { name: 'Protetor Solar FPS 60', price: 'R$ 34,90', points: 105, description: '200ml - Resistente à água, toque seco' },
                    { name: 'Multivitamínico', price: 'R$ 45,90', points: 138, description: '60 cápsulas - Complexo vitamínico completo' },
                    { name: 'Shampoo Anticaspa', price: 'R$ 18,90', points: 57, description: '400ml - Controla oleosidade e caspa' },
                    { name: 'Pasta de Dente', price: 'R$ 7,90', points: 24, description: '90g - Proteção total com flúor' },
                    { name: 'Termômetro Digital', price: 'R$ 29,90', points: 90, description: 'Leitura rápida, memória última medição' },
                    { name: 'Kit Primeiros Socorros', price: 'R$ 39,90', points: 120, description: 'Completo com bandagens, antisséptico e manual' }
                ]
            },
            'studio-hair': {
                name: 'Studio Hair',
                category: 'Serviços',
                items: [
                    { name: 'Corte Feminino', price: 'R$ 45,00', points: 135, description: 'Corte + lavagem + finalização + produtos premium' },
                    { name: 'Corte Masculino', price: 'R$ 30,00', points: 90, description: 'Corte moderno + acabamento + produtos de qualidade' },
                    { name: 'Coloração Completa', price: 'R$ 120,00', points: 360, description: 'Tintura profissional + tratamento + hidratação' },
                    { name: 'Mechas + Luzes', price: 'R$ 180,00', points: 540, description: 'Técnica profissional + tonalizante + tratamento' },
                    { name: 'Escova Progressiva', price: 'R$ 200,00', points: 600, description: 'Redução de volume + alinhamento + selagem' },
                    { name: 'Hidratação Profunda', price: 'R$ 60,00', points: 180, description: 'Máscara nutritiva + ampola + finalizador' },
                    { name: 'Manicure + Pedicure', price: 'R$ 35,00', points: 105, description: 'Esmaltação + cutilagem + hidratação' },
                    { name: 'Pacote Noiva', price: 'R$ 350,00', points: 1050, description: 'Corte + cor + penteado + maquiagem + teste' }
                ]
            },
            'pizzaria-italiana': {
                name: 'Pizzaria Italiana',
                category: 'Cardápio',
                items: [
                    { name: 'Pizza Margherita', price: 'R$ 42,90', points: 64, description: 'Molho de tomate, mussarela, manjericão fresco, azeite extra virgem' },
                    { name: 'Pizza Quattro Stagioni', price: 'R$ 56,90', points: 85, description: 'Presunto, cogumelos, alcachofra, azeitonas, mussarela' },
                    { name: 'Pizza Pepperoni', price: 'R$ 48,90', points: 73, description: 'Pepperoni artesanal, mussarela, orégano, molho especial' },
                    { name: 'Pizza Vegetariana', price: 'R$ 46,90', points: 70, description: 'Abobrinha, berinjela, pimentão, tomate seco, mussarela' },
                    { name: 'Calzone Tradicional', price: 'R$ 38,90', points: 58, description: 'Presunto, mussarela, molho de tomate, fechado e dourado' },
                    { name: 'Lasanha Bolonhesa', price: 'R$ 34,90', points: 52, description: 'Massa fresca, molho bolonhesa, bechamel, queijo gratinado' },
                    { name: 'Tiramisu', price: 'R$ 18,90', points: 28, description: 'Sobremesa italiana com café, mascarpone e cacau' },
                    { name: 'Vinho Chianti', price: 'R$ 89,90', points: 135, description: 'Vinho tinto italiano, 750ml - harmonização perfeita' }
                ]
            },
            'tech-store': {
                name: 'Tech Store',
                category: 'Produtos',
                items: [
                    { name: 'iPhone 15 Pro', price: 'R$ 8.999,90', points: 18000, description: '128GB, Titânio Natural, câmera 48MP, chip A17 Pro' },
                    { name: 'Samsung Galaxy S24', price: 'R$ 4.199,90', points: 8400, description: '256GB, câmera 50MP, tela 6.2", processador Snapdragon' },
                    { name: 'MacBook Air M3', price: 'R$ 12.999,90', points: 26000, description: '13", 8GB RAM, 256GB SSD, chip M3, bateria 18h' },
                    { name: 'iPad Pro 11"', price: 'R$ 7.599,90', points: 15200, description: '128GB, chip M4, Apple Pencil compatível, tela Liquid Retina' },
                    { name: 'AirPods Pro 2', price: 'R$ 2.399,90', points: 4800, description: 'Cancelamento de ruído, áudio espacial, case MagSafe' },
                    { name: 'Apple Watch Series 9', price: 'R$ 4.299,90', points: 8600, description: '45mm, GPS + Cellular, pulseira esportiva, resistente à água' },
                    { name: 'Nintendo Switch OLED', price: 'R$ 2.599,90', points: 5200, description: 'Tela OLED 7", 64GB, Joy-Con inclusos, dock TV' },
                    { name: 'Carregador Wireless', price: 'R$ 299,90', points: 600, description: '15W, compatível iPhone/Samsung, design premium' }
                ]
            }
        };

        const establishmentServices = {
            'salao-beleza': [
                { name: 'Corte Feminino + Escova', price: 'R$ 65,00', points: 65, duration: '90 min' },
                { name: 'Coloração Completa', price: 'R$ 150,00', points: 150, duration: '180 min' },
                { name: 'Manicure + Pedicure', price: 'R$ 45,00', points: 45, duration: '60 min' },
                { name: 'Hidratação Capilar', price: 'R$ 80,00', points: 80, duration: '120 min' }
            ]
        };

        // Funções dos botões dos estabelecimentos  
        function showMenu(establishmentId) {
            const menu = establishmentMenus[establishmentId];
            if (menu) {
                showLightboxModal(menu.name + ' - Cardápio', createMenuHTML(menu.items));
            } else {
                showLightboxModal('Cardápio', '<p style="text-align: center; color: var(--gray-600); padding: 2rem;">Em breve você poderá ver todos os pratos disponíveis!</p>');
            }
        }

        function createMenuHTML(items) {
            let html = '<div style="display: grid; gap: 1.5rem;">';
            items.forEach((item, index) => {
                html += `
                    <div style="display: flex; justify-content: space-between; align-items: start; padding: 1.5rem; background: var(--gray-50); border-radius: var(--radius-lg); border-left: 4px solid var(--primary-purple);">
                        <div style="flex: 1;">
                            <h4 style="color: var(--primary-purple); font-weight: 700; margin-bottom: 0.5rem; font-size: 1.1rem;">${item.name}</h4>
                            <p style="color: var(--gray-600); font-size: 0.9rem; line-height: 1.4; margin-bottom: 0.75rem;">${item.description}</p>
                            <div style="display: flex; align-items: center; gap: 1rem;">
                                <span style="background: var(--success-green); color: white; padding: 0.25rem 0.75rem; border-radius: var(--radius-full); font-weight: 600; font-size: 0.875rem;">
                                    💰 ${item.price}
                                </span>
                                <span style="background: var(--accent-orange); color: white; padding: 0.25rem 0.75rem; border-radius: var(--radius-full); font-weight: 600; font-size: 0.875rem;">
                                    🎯 ${item.points} pontos
                                </span>
                            </div>
                        </div>
                        <div style="margin-left: 1rem;">
                            <button class="btn btn-primary btn-sm" onclick="addToCart('${item.name}', '${item.price}')">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>
                `;
            });
            html += '</div>';
            html += `
                <div style="margin-top: 2rem; padding: 1.5rem; background: var(--gradient-primary); color: white; border-radius: var(--radius-lg); text-align: center;">
                    <p style="font-weight: 600; margin-bottom: 0.5rem;">💡 Como funciona?</p>
                    <p style="opacity: 0.9; font-size: 0.875rem;">Todos os preços já incluem os pontos de fidelidade! Acumule pontos e ganhe descontos nas próximas compras!</p>
                </div>
            `;
            return html;
        }

        function showLightboxModal(title, content) {
            const modal = document.createElement('div');
            modal.id = 'lightboxModal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                backdrop-filter: blur(8px);
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 2rem;
                animation: fadeIn 0.3s ease;
            `;

            modal.innerHTML = `
                <div class="lightbox-content" style="
                    background: white;
                    border-radius: var(--radius-xl);
                    width: 100%;
                    max-width: 800px;
                    max-height: 90vh;
                    overflow: hidden;
                    position: relative;
                    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
                    animation: slideUp 0.3s ease;
                ">
                    <div class="lightbox-header" style="
                        background: var(--gradient-primary);
                        color: white;
                        padding: 1.5rem 2rem;
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                    ">
                        <h2 style="font-size: 1.5rem; font-weight: 700; margin: 0;">${title}</h2>
                        <button onclick="closeLightboxModal()" style="
                            background: none;
                            border: none;
                            color: white;
                            font-size: 1.5rem;
                            cursor: pointer;
                            padding: 0.5rem;
                            border-radius: 50%;
                            transition: background 0.2s;
                        " onmouseover="this.style.background='rgba(255,255,255,0.2)'" onmouseout="this.style.background='none'">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="lightbox-body" style="
                        padding: 2rem;
                        overflow-y: auto;
                        max-height: calc(90vh - 120px);
                    ">
                        ${content}
                    </div>
                </div>
            `;

            // Fechar ao clicar fora
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeLightboxModal();
                }
            });

            document.body.appendChild(modal);
            document.body.style.overflow = 'hidden';
        }

        function closeLightboxModal() {
            const modal = document.getElementById('lightboxModal');
            if (modal) {
                modal.style.animation = 'fadeOut 0.3s ease forwards';
                setTimeout(() => {
                    document.body.removeChild(modal);
                    document.body.style.overflow = '';
                }, 300);
            }
        }

        function addToCart(itemName, price) {
            alert(`✅ ${itemName} adicionado ao carrinho!\n\nPreço: ${price}\n\nEm breve você poderá finalizar pedidos pelo app!`);
        }

        function visitEstablishment(establishmentId) {
            const locations = {
                'burger-house': 'Rua das Flores, 123 - Centro\n📍 A 850m de você',
                'farmacia-central': 'Av. Principal, 456 - Jardins\n📍 A 1.2km de você',
                'pizzaria-italiana': 'Rua Roma, 789 - Vila Nova\n📍 A 2.1km de você'
            };
            
            const location = locations[establishmentId] || 'Localização em breve!';
            alert(`📍 ${establishmentId.toUpperCase()}\n\n${location}\n\n🚗 Deseja abrir no GPS?`);
        }

        function showProducts(establishmentId) {
            showMenu(establishmentId);
        }

        function scheduleAppointment(establishmentId) {
            const services = establishmentServices[establishmentId];
            if (services) {
                let serviceText = `📅 AGENDAMENTO - ${establishmentId.toUpperCase()}\n\n`;
                serviceText += `🕐 Horários disponíveis hoje:\n`;
                serviceText += `• 09:00 - 10:30\n• 14:00 - 15:30\n• 16:00 - 17:30\n\n`;
                serviceText += `💼 Serviços disponíveis:\n`;
                services.forEach((service, index) => {
                    serviceText += `${index + 1}. ${service.name}\n`;
                    serviceText += `   💰 ${service.price} | ⏱️ ${service.duration}\n\n`;
                });
                alert(serviceText);
            } else {
                alert(`📅 Abrindo agendamento para ${establishmentId}...\n\n🕐 Horários disponíveis:\n• 09:00\n• 14:00\n• 16:00\n\nEm breve você poderá agendar online!`);
            }
        }

        function orderOnline(establishmentId) {
            alert(`🛒 DELIVERY - ${establishmentId.toUpperCase()}\n\n🚚 Taxa de entrega: R$ 5,00\n⏱️ Tempo estimado: 35-45 min\n🎯 Ganhe pontos em cada pedido!\n\nEm breve você poderá pedir pelo app!`);
        }

        function showServices(establishmentId) {
            scheduleAppointment(establishmentId);
        }

        function loadMoreEstablishments() {
            alert(`Carregando mais estabelecimentos...\n\nEm breve teremos centenas de parceiros!`);
        }

        // Sistema de Filtros e Avaliações
        let currentFilter = 'all';
        let allEstablishments = [];
        let favorites = JSON.parse(localStorage.getItem('favorites') || '[]');

        // Inicializar dados dos estabelecimentos
        function initializeEstablishments() {
            const cards = document.querySelectorAll('.establishment-card');
            allEstablishments = Array.from(cards).map(card => ({
                element: card,
                name: card.querySelector('h3').textContent,
                category: card.dataset.category,
                rating: parseFloat(card.dataset.rating),
                points: parseFloat(card.dataset.points),
                visits: parseInt(card.dataset.visits),
                distance: parseFloat(card.dataset.distance)
            }));
            updateResultsCount(allEstablishments.length);
            loadFavorites();
        }

        // Filtros por categoria
        function setFilter(filter) {
            currentFilter = filter;
            document.querySelectorAll('.filter-chip').forEach(chip => {
                chip.classList.remove('active');
            });
            document.querySelector(`[data-filter="${filter}"]`).classList.add('active');
            applyFilters();
        }

        // Aplicar todos os filtros
        function applyFilters() {
            const minRating = parseFloat(document.getElementById('minRating').value);
            const minPoints = parseFloat(document.getElementById('pointsMultiplier').value);
            const maxDistance = document.getElementById('distance').value;
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();

            let filteredEstablishments = allEstablishments.filter(est => {
                // Filtro de categoria
                if (currentFilter !== 'all' && est.category !== currentFilter) return false;
                
                // Filtro de avaliação
                if (est.rating < minRating) return false;
                
                // Filtro de pontos
                if (est.points < minPoints) return false;
                
                // Filtro de distância
                if (maxDistance !== 'all' && est.distance > parseFloat(maxDistance)) return false;
                
                // Filtro de busca
                if (searchTerm && !est.name.toLowerCase().includes(searchTerm)) return false;
                
                return true;
            });

            // Aplicar ordenação
            applySorting(filteredEstablishments);
            
            // Mostrar/ocultar estabelecimentos
            allEstablishments.forEach(est => {
                est.element.style.display = filteredEstablishments.includes(est) ? 'block' : 'none';
            });

            updateResultsCount(filteredEstablishments.length);
        }

        // Aplicar ordenação
        function applySorting(establishments = null) {
            const sortBy = document.getElementById('sortBy').value;
            const toSort = establishments || allEstablishments;

            toSort.sort((a, b) => {
                switch(sortBy) {
                    case 'rating':
                        return b.rating - a.rating;
                    case 'points':
                        return b.points - a.points;
                    case 'visits':
                        return b.visits - a.visits;
                    case 'distance':
                        return a.distance - b.distance;
                    case 'alphabetical':
                        return a.name.localeCompare(b.name);
                    case 'newest':
                        return Math.random() - 0.5; // Simulação de ordenação por novos
                    default: // relevance
                        return (b.rating * 0.4 + b.visits * 0.0001 + (5 - a.distance) * 0.3 + b.points * 0.3) - 
                               (a.rating * 0.4 + a.visits * 0.0001 + (5 - b.distance) * 0.3 + a.points * 0.3);
                }
            });

            // Reordenar elementos no DOM
            const container = document.getElementById('establishmentsGrid');
            toSort.forEach(est => {
                container.appendChild(est.element);
            });
        }

        // Limpar filtros
        function clearFilters() {
            document.getElementById('sortBy').value = 'relevance';
            document.getElementById('minRating').value = '0';
            document.getElementById('pointsMultiplier').value = '0';
            document.getElementById('distance').value = 'all';
            document.getElementById('searchInput').value = '';
            setFilter('all');
        }

        // Atualizar contador de resultados
        function updateResultsCount(count) {
            const total = allEstablishments.length;
            const resultsText = count === total ? 
                `Mostrando todos os ${total} estabelecimentos` :
                `Mostrando ${count} de ${total} estabelecimentos`;
            document.getElementById('resultsCount').innerHTML = `<i class="fas fa-info-circle icon-sm"></i> ${resultsText}`;
        }

        // Sistema de Favoritos
        function toggleFavorite(establishmentId) {
            const icon = document.getElementById(`fav-${establishmentId}`);
            const index = favorites.indexOf(establishmentId);
            
            if (index === -1) {
                favorites.push(establishmentId);
                icon.style.color = 'var(--error-red)';
                icon.classList.add('fas');
                icon.classList.remove('far');
                showNotification(`❤️ ${establishmentId.replace('-', ' ')} adicionado aos favoritos!`, 'success');
            } else {
                favorites.splice(index, 1);
                icon.style.color = 'var(--gray-400)';
                icon.classList.add('far');
                icon.classList.remove('fas');
                showNotification(`💔 ${establishmentId.replace('-', ' ')} removido dos favoritos`, 'info');
            }
            
            localStorage.setItem('favorites', JSON.stringify(favorites));
        }

        // Carregar favoritos
        function loadFavorites() {
            favorites.forEach(id => {
                const icon = document.getElementById(`fav-${id}`);
                if (icon) {
                    icon.style.color = 'var(--error-red)';
                    icon.classList.add('fas');
                    icon.classList.remove('far');
                }
            });
        }

        // Sistema de Avaliações
        function showReviews(establishmentId) {
            const reviews = getEstablishmentReviews(establishmentId);
            const content = createReviewsHTML(establishmentId, reviews);
            showLightboxModal(`Avaliações - ${establishmentId.replace('-', ' ')}`, content);
        }

        // Obter avaliações do estabelecimento
        function getEstablishmentReviews(establishmentId) {
            // Dados simulados - em produção viria do backend
            const allReviews = {
                'burger-house': [
                    {
                        name: 'Maria Silva',
                        avatar: 'https://images.unsplash.com/photo-1494790108755-2616b332c108?w=40&h=40&fit=crop&crop=face',
                        rating: 5,
                        date: '2024-09-20',
                        comment: 'Hambúrguer delicioso e atendimento excelente! Super recomendo o X-Bacon.',
                        helpful: 23
                    },
                    {
                        name: 'João Santos',
                        avatar: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=40&h=40&fit=crop&crop=face',
                        rating: 5,
                        date: '2024-09-18',
                        comment: 'Melhor hambúrguer da cidade! Ingredientes frescos e entrega rápida.',
                        helpful: 19
                    },
                    {
                        name: 'Ana Costa',
                        avatar: 'https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=40&h=40&fit=crop&crop=face',
                        rating: 4,
                        date: '2024-09-15',
                        comment: 'Muito bom! Apenas o tempo de entrega poderia ser menor.',
                        helpful: 12
                    }
                ],
                'fashion-store': [
                    {
                        name: 'Ana Costa',
                        avatar: 'https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=40&h=40&fit=crop&crop=face',
                        rating: 5,
                        date: '2024-09-19',
                        comment: 'Roupas lindas e de qualidade! Sempre encontro peças únicas aqui.',
                        helpful: 15
                    },
                    {
                        name: 'Carla Oliveira',
                        avatar: 'https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=40&h=40&fit=crop&crop=face',
                        rating: 5,
                        date: '2024-09-17',
                        comment: 'Atendimento personalizado e peças incríveis! Preços justos.',
                        helpful: 11
                    }
                ]
            };
            return allReviews[establishmentId] || [];
        }

        // Criar HTML das avaliações
        function createReviewsHTML(establishmentId, reviews) {
            const establishment = allEstablishments.find(est => 
                est.element.querySelector('h3').textContent.toLowerCase().replace(' ', '-') === establishmentId
            );

            let html = `
                <div style="margin-bottom: 2rem;">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">
                        <div style="text-align: center;">
                            <div style="font-size: 3rem; font-weight: 700; color: var(--primary-purple);">${establishment?.rating || '4.8'}</div>
                            <div style="display: flex; justify-content: center; margin-bottom: 0.5rem;">
                                ${createStarRating(establishment?.rating || 4.8)}
                            </div>
                            <div style="color: var(--gray-600); font-size: 0.875rem;">${reviews.length} avaliações</div>
                        </div>
                        <div style="flex: 1;">
                            ${createRatingBars(reviews)}
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" onclick="showRatingForm('${establishmentId}')" style="width: 100%; margin-bottom: 2rem;">
                        <i class="fas fa-star"></i> Avaliar este estabelecimento
                    </button>
                </div>

                <div style="border-top: 1px solid var(--gray-200); padding-top: 1.5rem;">
                    <h3 style="margin-bottom: 1.5rem; color: var(--gray-800);">Comentários dos clientes</h3>
                    ${reviews.map(review => createReviewHTML(review)).join('')}
                </div>
            `;

            return html;
        }

        // Criar avaliação por estrelas
        function createStarRating(rating) {
            let stars = '';
            for (let i = 1; i <= 5; i++) {
                if (i <= rating) {
                    stars += '<i class="fas fa-star" style="color: #fbbf24;"></i>';
                } else if (i - 0.5 <= rating) {
                    stars += '<i class="fas fa-star-half-alt" style="color: #fbbf24;"></i>';
                } else {
                    stars += '<i class="far fa-star" style="color: #fbbf24;"></i>';
                }
            }
            return stars;
        }

        // Criar barras de avaliação
        function createRatingBars(reviews) {
            const counts = [0, 0, 0, 0, 0];
            reviews.forEach(review => counts[review.rating - 1]++);
            const total = reviews.length || 1;

            let html = '';
            for (let i = 4; i >= 0; i--) {
                const count = counts[i];
                const percentage = (count / total) * 100;
                html += `
                    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.25rem;">
                        <span style="font-size: 0.875rem; color: var(--gray-600); width: 20px;">${i + 1}</span>
                        <i class="fas fa-star" style="color: #fbbf24; font-size: 0.75rem;"></i>
                        <div style="flex: 1; height: 8px; background: var(--gray-200); border-radius: 4px; overflow: hidden;">
                            <div style="height: 100%; background: #fbbf24; width: ${percentage}%; transition: width 0.3s ease;"></div>
                        </div>
                        <span style="font-size: 0.875rem; color: var(--gray-600); width: 30px;">${count}</span>
                    </div>
                `;
            }
            return html;
        }

        // Criar HTML de uma avaliação
        function createReviewHTML(review) {
            const date = new Date(review.date).toLocaleDateString('pt-BR');
            return `
                <div style="border-bottom: 1px solid var(--gray-100); padding-bottom: 1.5rem; margin-bottom: 1.5rem;">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                        <img src="${review.avatar}" style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover;">
                        <div>
                            <div style="font-weight: 600; color: var(--gray-800);">${review.name}</div>
                            <div style="display: flex; align-items: center; gap: 0.5rem; margin-top: 0.25rem;">
                                <div style="display: flex; gap: 0.125rem;">
                                    ${createStarRating(review.rating)}
                                </div>
                                <span style="color: var(--gray-500); font-size: 0.875rem;">${date}</span>
                            </div>
                        </div>
                    </div>
                    <p style="color: var(--gray-700); line-height: 1.5; margin-bottom: 1rem;">${review.comment}</p>
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <button onclick="likeReview('${review.name}')" style="background: none; border: 1px solid var(--gray-300); color: var(--gray-600); padding: 0.5rem 1rem; border-radius: var(--radius-md); cursor: pointer; font-size: 0.875rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="far fa-thumbs-up"></i> Útil (${review.helpful})
                        </button>
                        <button style="background: none; border: none; color: var(--gray-500); cursor: pointer; font-size: 0.875rem;">
                            <i class="far fa-flag"></i> Denunciar
                        </button>
                    </div>
                </div>
            `;
        }

        // Mostrar formulário de avaliação
        function showRatingForm(establishmentId) {
            const content = `
                <form onsubmit="submitRating('${establishmentId}', event)" style="display: grid; gap: 1.5rem;">
                    <div>
                        <label style="display: block; font-weight: 600; margin-bottom: 0.5rem;">Sua avaliação:</label>
                        <div style="display: flex; gap: 0.5rem; margin-bottom: 1rem;">
                            ${[1,2,3,4,5].map(i => `
                                <button type="button" onclick="setRating(${i})" style="background: none; border: none; font-size: 2rem; color: var(--gray-300); cursor: pointer;" id="star-${i}">
                                    <i class="far fa-star"></i>
                                </button>
                            `).join('')}
                        </div>
                        <div id="ratingText" style="color: var(--gray-600); font-size: 0.875rem;">Clique nas estrelas para avaliar</div>
                    </div>
                    
                    <div>
                        <label for="reviewComment" style="display: block; font-weight: 600; margin-bottom: 0.5rem;">Seu comentário:</label>
                        <textarea id="reviewComment" placeholder="Conte sua experiência..." style="width: 100%; min-height: 100px; padding: 1rem; border: 1px solid var(--gray-300); border-radius: var(--radius-md); resize: vertical;" required></textarea>
                    </div>
                    
                    <button type="submit" class="btn btn-primary" style="width: 100%;">
                        <i class="fas fa-paper-plane"></i> Enviar Avaliação
                    </button>
                </form>
            `;
            
            showLightboxModal('Avaliar Estabelecimento', content);
        }

        let currentRating = 0;

        // Definir avaliação por estrelas
        function setRating(rating) {
            currentRating = rating;
            const ratingTexts = ['', 'Péssimo', 'Ruim', 'Regular', 'Bom', 'Excelente'];
            
            for (let i = 1; i <= 5; i++) {
                const star = document.getElementById(`star-${i}`);
                if (i <= rating) {
                    star.style.color = '#fbbf24';
                    star.innerHTML = '<i class="fas fa-star"></i>';
                } else {
                    star.style.color = 'var(--gray-300)';
                    star.innerHTML = '<i class="far fa-star"></i>';
                }
            }
            
            document.getElementById('ratingText').textContent = ratingTexts[rating];
        }

        // Enviar avaliação
        function submitRating(establishmentId, event) {
            event.preventDefault();
            
            if (currentRating === 0) {
                showNotification('Por favor, selecione uma avaliação', 'error');
                return;
            }
            
            const comment = document.getElementById('reviewComment').value;
            
            // Simular envio - em produção enviaria para o backend
            showNotification('✅ Avaliação enviada com sucesso! Obrigado pelo feedback.', 'success');
            closeLightboxModal();
            
            // Reset
            currentRating = 0;
        }

        // Curtir avaliação
        function likeReview(reviewerName) {
            showNotification(`👍 Você achou a avaliação de ${reviewerName} útil!`, 'success');
        }

        // Busca em tempo real
        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    applyFilters();
                });
            }
            
            initializeEstablishments();
        });

        // Notificações
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            const colors = {
                success: '#22c55e',
                error: '#ef4444',
                info: '#3b82f6',
                warning: '#f59e0b'
            };
            
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${colors[type]};
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 0.5rem;
                box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
                z-index: 10001;
                animation: slideIn 0.3s ease;
                max-width: 400px;
            `;
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease forwards';
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // CSS para animações
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
            @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }
            @keyframes fadeOut {
                from { opacity: 1; }
                to { opacity: 0; }
            }
            @keyframes slideUp {
                from { transform: translateY(30px); opacity: 0; }
                to { transform: translateY(0); opacity: 1; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>