<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Empresas Parceiras - Tem de Tudo</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="/css/theme-escuro.css">
    
    <style>
        body {
            padding-bottom: 80px;
        }
        
        .header {
            background: linear-gradient(135deg, var(--purple-1), var(--purple-2));
            padding: var(--space-6) var(--space-4);
            color: white;
        }
        
        .header h1 {
            font-size: 24px;
            font-weight: 800;
            margin-bottom: var(--space-2);
        }
        
        .header p {
            opacity: 0.9;
            font-size: 14px;
        }
        
        .search-section {
            padding: var(--space-4);
            background: var(--bg-primary);
            border-bottom: 1px solid var(--border-color);
        }
        
        .search-box {
            position: relative;
        }
        
        .search-box input {
            width: 100%;
            padding: 14px 48px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-full);
            color: var(--text-primary);
            font-size: 15px;
        }
        
        .search-box input:focus {
            border-color: var(--purple-1);
            outline: none;
        }
        
        .search-box i {
            position: absolute;
            left: 18px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
        }
        
        .categories {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            padding: var(--space-4);
            scrollbar-width: none;
            background: var(--bg-primary);
        }
        
        .categories::-webkit-scrollbar {
            display: none;
        }
        
        .category-chip {
            padding: 8px 16px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-full);
            white-space: nowrap;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .category-chip:hover,
        .category-chip.active {
            background: var(--purple-1);
            color: white;
            border-color: var(--purple-1);
        }
        
        .empresas-list {
            padding: var(--space-4);
        }
        
        .empresa-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            overflow: hidden;
            margin-bottom: var(--space-4);
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .empresa-card:hover {
            border-color: var(--border-hover);
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }
        
        .empresa-image {
            width: 100%;
            height: 160px;
            object-fit: cover;
            background: linear-gradient(135deg, var(--purple-1), var(--purple-2));
        }
        
        .empresa-content {
            padding: var(--space-4);
        }
        
        .empresa-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: var(--space-3);
        }
        
        .empresa-name {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 4px;
        }
        
        .empresa-category {
            font-size: 13px;
            color: var(--text-muted);
        }
        
        .empresa-badge {
            background: rgba(16, 185, 129, 0.1);
            color: #10b981;
            padding: 4px 12px;
            border-radius: var(--radius-full);
            font-size: 12px;
            font-weight: 600;
        }
        
        .empresa-stats {
            display: flex;
            gap: var(--space-4);
            margin-bottom: var(--space-3);
            padding-bottom: var(--space-3);
            border-bottom: 1px solid var(--border-color);
        }
        
        .stat-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            color: var(--text-muted);
        }
        
        .stat-item i {
            color: var(--purple-1);
        }
        
        .empresa-promo {
            background: rgba(102, 126, 234, 0.08);
            padding: var(--space-3);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-3);
        }
        
        .promo-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--purple-1);
            margin-bottom: 4px;
        }
        
        .promo-desc {
            font-size: 13px;
            color: var(--text-secondary);
        }
        
        .empresa-actions {
            display: flex;
            gap: var(--space-2);
        }
        
        .btn-primary {
            flex: 1;
            padding: 12px;
            background: linear-gradient(135deg, var(--purple-1), var(--purple-2));
            color: white;
            border: none;
            border-radius: var(--radius-md);
            font-weight: 600;
            cursor: pointer;
        }
        
        .btn-outline {
            flex: 1;
            padding: 12px;
            background: transparent;
            color: var(--purple-1);
            border: 1px solid var(--purple-1);
            border-radius: var(--radius-md);
            font-weight: 600;
            cursor: pointer;
        }
        
        .empty-state {
            text-align: center;
            padding: var(--space-8);
            color: var(--text-muted);
        }
        
        .empty-state i {
            font-size: 48px;
            margin-bottom: var(--space-4);
            opacity: 0.3;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1><i class="fas fa-store"></i> Empresas Parceiras</h1>
        <p>Descubra empresas e ganhe b√¥nus!</p>
    </div>
    
    <div class="search-section">
        <div class="search-box">
            <i class="fas fa-search"></i>
            <input type="text" id="searchInput" placeholder="Buscar empresas..." oninput="filtrarEmpresas()">
        </div>
    </div>
    
    <div class="categories">
        <div class="category-chip active" onclick="filtrarCategoria('todas')">
            <i class="fas fa-th"></i> Todas
        </div>
        <div class="category-chip" onclick="filtrarCategoria('alimentacao')">
            <i class="fas fa-utensils"></i> Alimenta√ß√£o
        </div>
        <div class="category-chip" onclick="filtrarCategoria('moda')">
            <i class="fas fa-tshirt"></i> Moda
        </div>
        <div class="category-chip" onclick="filtrarCategoria('saude')">
            <i class="fas fa-heartbeat"></i> Sa√∫de
        </div>
        <div class="category-chip" onclick="filtrarCategoria('beleza')">
            <i class="fas fa-cut"></i> Beleza
        </div>
        <div class="category-chip" onclick="filtrarCategoria('servicos')">
            <i class="fas fa-tools"></i> Servi√ßos
        </div>
    </div>
    
    <div class="empresas-list" id="empresasList">
        <!-- Empresas ser√£o carregadas aqui via JavaScript -->
    </div>
    
    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <a href="/dashboard-cliente.html" class="nav-item">
            <i class="fas fa-home"></i>
            <span>In√≠cio</span>
        </a>
        <a href="/app-empresas.html" class="nav-item active">
            <i class="fas fa-store"></i>
            <span>Empresas</span>
        </a>
        <a href="/app-promocoes.html" class="nav-item">
            <i class="fas fa-tags"></i>
            <span>Promo√ß√µes</span>
        </a>
        <a href="/app-qrcode.html" class="nav-item">
            <i class="fas fa-qrcode"></i>
            <span>Meu QR</span>
        </a>
        <a href="/app-perfil-cliente.html" class="nav-item">
            <i class="fas fa-user"></i>
            <span>Perfil</span>
        </a>
    </nav>
    
    <script>
        const API_URL = window.location.hostname === 'localhost' ? 
            'http://localhost:8000/api' : 
            'https://tem-de-tudo.onrender.com/api';
        
        // Dados fict√≠cios de empresas com fotos reais
        const empresasFicticias = [
            {
                id: 1,
                nome: 'Restaurante Sabor & Arte',
                categoria: 'alimentacao',
                descricao: 'Culin√°ria brasileira contempor√¢nea',
                imagem: 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800',
                pontos_checkin: 10,
                total_clientes: 1247,
                avaliacoes: 4.8,
                aberto: true,
                promocao: {
                    titulo: 'üéâ Desconto de 20% no almo√ßo',
                    descricao: 'V√°lido de segunda a sexta at√© 15h'
                }
            },
            {
                id: 2,
                nome: 'Pizzaria Bella Napoli',
                categoria: 'alimentacao',
                descricao: 'Pizzas artesanais no forno a lenha',
                imagem: 'https://images.unsplash.com/photo-1513104890138-7c749659a591?w=800',
                pontos_checkin: 15,
                total_clientes: 2893,
                avaliacoes: 4.9,
                aberto: true,
                promocao: {
                    titulo: 'üçï Compre 1 leve 2 √†s ter√ßas',
                    descricao: 'Pizza grande na compra de qualquer tamanho'
                }
            },
            {
                id: 3,
                nome: 'Boutique Style Fashion',
                categoria: 'moda',
                descricao: 'Moda feminina e acess√≥rios',
                imagem: 'https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=800',
                pontos_checkin: 20,
                total_clientes: 856,
                avaliacoes: 4.7,
                aberto: true,
                promocao: {
                    titulo: 'üëó 30% OFF em pe√ßas selecionadas',
                    descricao: 'Cole√ß√£o ver√£o com super desconto'
                }
            },
            {
                id: 4,
                nome: 'Academia Corpo & Mente',
                categoria: 'saude',
                descricao: 'Fitness, muscula√ß√£o e pilates',
                imagem: 'https://images.unsplash.com/photo-1534438327276-14e5300c3a48?w=800',
                pontos_checkin: 25,
                total_clientes: 1523,
                avaliacoes: 4.9,
                aberto: true,
                promocao: {
                    titulo: 'üí™ 1 m√™s gr√°tis na matr√≠cula anual',
                    descricao: 'Personal trainer incluso nos 3 primeiros meses'
                }
            },
            {
                id: 5,
                nome: 'Sal√£o Beleza Pura',
                categoria: 'beleza',
                descricao: 'Cabelo, maquiagem e est√©tica',
                imagem: 'https://images.unsplash.com/photo-1560066984-138dadb4c035?w=800',
                pontos_checkin: 18,
                total_clientes: 2156,
                avaliacoes: 4.8,
                aberto: true,
                promocao: {
                    titulo: 'üíá Corte + Escova por R$ 59',
                    descricao: 'V√°lido de segunda a quinta-feira'
                }
            },
            {
                id: 6,
                nome: 'Cafeteria Aroma & Gr√£o',
                categoria: 'alimentacao',
                descricao: 'Caf√©s especiais e doces artesanais',
                imagem: 'https://images.unsplash.com/photo-1501339847302-ac426a4a7cbb?w=800',
                pontos_checkin: 8,
                total_clientes: 3421,
                avaliacoes: 4.9,
                aberto: true,
                promocao: {
                    titulo: '‚òï Caf√© + Bolo R$ 15',
                    descricao: 'Combo especial da tarde'
                }
            },
            {
                id: 7,
                nome: 'Pet Shop Amigo Fiel',
                categoria: 'servicos',
                descricao: 'Banho, tosa e produtos pet',
                imagem: 'https://images.unsplash.com/photo-1548681528-6a5c45b66b42?w=800',
                pontos_checkin: 12,
                total_clientes: 967,
                avaliacoes: 4.7,
                aberto: true,
                promocao: {
                    titulo: 'üê∂ Banho e tosa com 25% OFF',
                    descricao: 'Agendamento online com desconto extra'
                }
            },
            {
                id: 8,
                nome: 'Farm√°cia Vida & Sa√∫de',
                categoria: 'saude',
                descricao: 'Medicamentos e produtos naturais',
                imagem: 'https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?w=800',
                pontos_checkin: 10,
                total_clientes: 4532,
                avaliacoes: 4.6,
                aberto: true,
                promocao: {
                    titulo: 'üíä Gen√©ricos com at√© 40% OFF',
                    descricao: 'Entrega gr√°tis acima de R$ 50'
                }
            },
            {
                id: 9,
                nome: 'Hamburgueria Urban Grill',
                categoria: 'alimentacao',
                descricao: 'Hamb√∫rgueres artesanais premium',
                imagem: 'https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=800',
                pontos_checkin: 15,
                total_clientes: 1876,
                avaliacoes: 4.8,
                aberto: true,
                promocao: {
                    titulo: 'üçî Combo Duplo por R$ 39,90',
                    descricao: '2 hamb√∫rgueres + fritas + refrigerante'
                }
            },
            {
                id: 10,
                nome: 'Loja Tech Store',
                categoria: 'servicos',
                descricao: 'Eletr√¥nicos e acess√≥rios',
                imagem: 'https://images.unsplash.com/photo-1498049794561-7780e7231661?w=800',
                pontos_checkin: 30,
                total_clientes: 2341,
                avaliacoes: 4.7,
                aberto: true,
                promocao: {
                    titulo: 'üì± Fones Bluetooth R$ 99',
                    descricao: '√öltimas unidades com desconto'
                }
            }
        ];
        
        let categoriaAtual = 'todas';
        let empresasFiltradas = empresasFicticias;
        
        // Carrega empresas ao iniciar
        document.addEventListener('DOMContentLoaded', () => {
            carregarEmpresas();
        });
        
        function carregarEmpresas() {
            renderizarEmpresas(empresasFiltradas);
        }
        
        function renderizarEmpresas(empresas) {
            const container = document.getElementById('empresasList');
            
            if (empresas.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-search"></i>
                        <p>Nenhuma empresa encontrada</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = empresas.map(empresa => `
                <div class="empresa-card" onclick="abrirEmpresa(${empresa.id})">
                    <img src="${empresa.imagem}" alt="${empresa.nome}" class="empresa-image" onerror="this.src='https://via.placeholder.com/800x400/667eea/ffffff?text=${encodeURIComponent(empresa.nome)}'">
                    
                    <div class="empresa-content">
                        <div class="empresa-header">
                            <div>
                                <div class="empresa-name">${empresa.nome}</div>
                                <div class="empresa-category">
                                    <i class="fas ${getCategoriaIcon(empresa.categoria)}"></i>
                                    ${getCategoriaLabel(empresa.categoria)}
                                </div>
                            </div>
                            ${empresa.aberto ? '<span class="empresa-badge">Aberto</span>' : ''}
                        </div>
                        
                        <div class="empresa-stats">
                            <div class="stat-item">
                                <i class="fas fa-star"></i>
                                ${empresa.avaliacoes}
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-users"></i>
                                ${formatarNumero(empresa.total_clientes)} clientes
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-coins"></i>
                                +${empresa.pontos_checkin} pontos
                            </div>
                        </div>
                        
                        ${empresa.promocao ? `
                        <div class="empresa-promo">
                            <div class="promo-title">${empresa.promocao.titulo}</div>
                            <div class="promo-desc">${empresa.promocao.descricao}</div>
                        </div>
                        ` : ''}
                        
                        <div class="empresa-actions">
                            <button class="btn-primary" onclick="event.stopPropagation(); fazerCheckin(${empresa.id})">
                                <i class="fas fa-qrcode"></i> Check-in
                            </button>
                            <button class="btn-outline" onclick="event.stopPropagation(); verPromocoes(${empresa.id})">
                                <i class="fas fa-tags"></i> Promo√ß√µes
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }
        
        function filtrarEmpresas() {
            const termo = document.getElementById('searchInput').value.toLowerCase();
            
            empresasFiltradas = empresasFicticias.filter(empresa => {
                const matchCategoria = categoriaAtual === 'todas' || empresa.categoria === categoriaAtual;
                const matchBusca = termo === '' || 
                    empresa.nome.toLowerCase().includes(termo) ||
                    empresa.descricao.toLowerCase().includes(termo);
                
                return matchCategoria && matchBusca;
            });
            
            renderizarEmpresas(empresasFiltradas);
        }
        
        function filtrarCategoria(categoria) {
            categoriaAtual = categoria;
            
            // Atualiza visual dos chips
            document.querySelectorAll('.category-chip').forEach(chip => {
                chip.classList.remove('active');
            });
            event.target.closest('.category-chip').classList.add('active');
            
            filtrarEmpresas();
        }
        
        function getCategoriaIcon(categoria) {
            const icons = {
                'alimentacao': 'fa-utensils',
                'moda': 'fa-tshirt',
                'saude': 'fa-heartbeat',
                'beleza': 'fa-cut',
                'servicos': 'fa-tools'
            };
            return icons[categoria] || 'fa-store';
        }
        
        function getCategoriaLabel(categoria) {
            const labels = {
                'alimentacao': 'Alimenta√ß√£o',
                'moda': 'Moda',
                'saude': 'Sa√∫de',
                'beleza': 'Beleza',
                'servicos': 'Servi√ßos'
            };
            return labels[categoria] || 'Outros';
        }
        
        function formatarNumero(num) {
            if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'k';
            }
            return num;
        }
        
        function abrirEmpresa(id) {
            window.location.href = `/app-empresa-detalhes.html?id=${id}`;
        }
        
        function fazerCheckin(id) {
            const empresa = empresasFicticias.find(e => e.id === id);
            if (empresa) {
                alert(`‚úÖ Check-in realizado em ${empresa.nome}!\n\nVoc√™ ganhou +${empresa.pontos_checkin} pontos! üéâ`);
                
                // Adiciona notifica√ß√£o
                if (window.NotificationSystem) {
                    NotificationSystem.add({
                        title: '‚úÖ Check-in Realizado!',
                        message: `Voc√™ ganhou ${empresa.pontos_checkin} pontos em ${empresa.nome}`,
                        icon: 'fa-check-circle',
                        type: 'success'
                    });
                }
            }
        }
        
        function verPromocoes(id) {
            window.location.href = `/app-promocoes.html?empresa=${id}`;
        }
    </script>
</body>
</html>
