<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login Administrativo - Tem de Tudo</title>
<meta name="description" content="Acesso administrativo seguro ao sistema Tem de Tudo">
<meta name="theme-color" content="#6F1AB6">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<script src="js/config.js"></script>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link rel="stylesheet" href="css/vivo-styles.css">
<script src="js/config.js"></script>
<script src="js/auth-guard.js"></script>
</head>
<body>
<div class="admin-login-page">
    <!-- Background Decorations -->
    <div class="bg-decoration">
        <div class="decoration-circle decoration-1"></div>
        <div class="decoration-circle decoration-2"></div>
        <div class="decoration-circle decoration-3"></div>
    </div>

    <!-- Back to App -->
    <div class="back-to-app">
        <a href="index.html" class="back-btn">
            <i class="fas fa-arrow-left"></i>
            <span>Voltar ao App</span>
        </a>
    </div>

    <!-- Login Container -->
    <div class="login-container fade-in">
        <!-- Logo Section -->
        <div class="logo-section">
            <div class="icon">
                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGRlZnM+CjxsaW5lYXJHcmFkaWVudCBpZD0iYWRtaW5HcmFkaWVudCIgeDE9IjAiIHkxPSIwIiB4Mj0iMSIgeTI9IjEiPgo8c3RvcCBzdG9wLWNvbG9yPSIjNkYxQUI2Ii8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzRBMEU4QyIvPgo8L2xpbmVhckdyYWRpZW50Pgo8L2RlZnM+CjxyZWN0IHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcng9IjEyIiBmaWxsPSJ1cmwoI2FkbWluR3JhZGllbnQpIi8+Cjxwb2x5Z29uIHBvaW50cz0iMjUsNSAzNSw1IDQ1LDE1IDQ1LDI1IDM1LDM1IDI1LDM1IDE1LDI1IDE1LDE1IiBmaWxsPSIjRkZGRkZGIiBvcGFjaXR5PSIwLjkiLz4KPGNpcmNsZSBjeD0iMzAiIGN5PSIyMCIgcj0iMyIgZmlsbD0iIzZGMUFCNiIvPgo8cGF0aCBkPSJNMjUgMjUgTDMwIDMwIEwzOCAyMiIgc3Ryb2tlPSIjNkYxQUI2IiBzdHJva2Utd2lkdGg9IjIiIGZpbGw9Im5vbmUiLz4KPC9zdmc+" alt="Admin Icon" style="width: 60px; height: 60px; border-radius: 12px; box-shadow: 0 4px 16px rgba(111, 26, 182, 0.3);">
            </div>
            <h1>Administração</h1>
            <p>Sistema de Gestão Tem de Tudo</p>
        </div>

        <!-- Alert Messages -->
        <div id="alertMessage" class="alert error" style="display: none;">
            <i class="fas fa-exclamation-triangle"></i>
            <span id="alertText"></span>
        </div>

        <!-- Login Form -->
        <form id="adminLoginForm" onsubmit="handleAdminLogin(event)">
            <div class="form-group">
                <label for="adminEmail">Email Administrativo</label>
                <input type="email" 
                       id="adminEmail" 
                       name="email" 
                       class="form-input" 
                       placeholder="admin@temdetudo.com" 
                       required
                       autocomplete="username">
            </div>

            <div class="form-group">
                <label for="adminPassword">Senha</label>
                <div class="password-input-group">
                    <input type="password" 
                           id="adminPassword" 
                           name="password" 
                           class="form-input" 
                           placeholder="Sua senha administrativa" 
                           required
                           autocomplete="current-password">
                    <button type="button" class="password-toggle" onclick="togglePassword('adminPassword')">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
            </div>

            <button type="submit" class="login-btn" id="loginBtn">
                <span id="loginBtnText">Entrar no Sistema</span>
                <div class="loading-spinner" id="loginSpinner" style="display: none;"></div>
            </button>
        </form>

        <!-- Forgot Password -->
        <div class="forgot-password">
            <a href="#" onclick="showForgotPassword()">Esqueceu a senha?</a>
        </div>
    </div>
</div>

<script>
// Admin credentials for demo (in production, use proper authentication)
const DEMO_ADMIN_CREDENTIALS = {
    email: 'admin@temdetudo.com',
    password: 'admin123'
};

// Handle admin login
async function handleAdminLogin(event) {
    event.preventDefault();
    
    const email = document.getElementById('adminEmail').value;
    const password = document.getElementById('adminPassword').value;
    const loginBtn = document.getElementById('loginBtn');
    const loginBtnText = document.getElementById('loginBtnText');
    const loginSpinner = document.getElementById('loginSpinner');

    // Show loading state
    loginBtn.disabled = true;
    loginBtnText.textContent = 'Verificando...';
    loginSpinner.style.display = 'block';

    try {
        // Simulate API call delay
        await new Promise(resolve => setTimeout(resolve, 1500));

        // Demo authentication
        if (email === DEMO_ADMIN_CREDENTIALS.email && password === DEMO_ADMIN_CREDENTIALS.password) {
            // Success
            showAlert('Login realizado com sucesso!', 'success');
            
            // Store admin token
            localStorage.setItem('adminToken', 'demo_admin_token_' + Date.now());
            localStorage.setItem('adminUser', JSON.stringify({
                id: 1,
                name: 'Administrador',
                email: email,
                role: 'admin',
                loginTime: new Date().toISOString()
            }));

            // Redirect to admin panel
            setTimeout(() => {
                window.location.href = 'admin-painel.html';
            }, 1000);
        } else {
            // Failed authentication
            throw new Error('Credenciais inválidas');
        }
    } catch (error) {
        console.error('Erro no login administrativo:', error);
        showAlert(error.message || 'Erro interno do servidor. Tente novamente.', 'error');
    } finally {
        // Reset button state
        loginBtn.disabled = false;
        loginBtnText.textContent = 'Entrar no Sistema';
        loginSpinner.style.display = 'none';
    }
}

// Show alert message
function showAlert(message, type = 'error') {
    const alertElement = document.getElementById('alertMessage');
    const alertText = document.getElementById('alertText');
    
    alertText.textContent = message;
    alertElement.className = `alert ${type}`;
    alertElement.style.display = 'block';
    
    // Auto-hide after 5 seconds
    setTimeout(() => {
        alertElement.style.display = 'none';
    }, 5000);
}

// Toggle password visibility
function togglePassword(inputId) {
    const input = document.getElementById(inputId);
    const toggleBtn = input.nextElementSibling;
    const icon = toggleBtn.querySelector('i');
    
    if (input.type === 'password') {
        input.type = 'text';
        icon.className = 'fas fa-eye-slash';
    } else {
        input.type = 'password';
        icon.className = 'fas fa-eye';
    }
}

// Show forgot password modal (placeholder)
function showForgotPassword() {
    alert('🔐 Recurso de recuperação de senha\n\nPara recuperar sua senha administrativa, entre em contato com o suporte técnico:\n\n📧 suporte@temdetudo.com\n📱 (11) 99999-9999');
}

// Check if already logged in
document.addEventListener('DOMContentLoaded', function() {
    const adminToken = localStorage.getItem('adminToken');
    if (adminToken) {
        // Already logged in, redirect to admin panel
        window.location.href = 'admin-painel.html';
    }
});

// Demo credentials hint
setTimeout(() => {
    console.log('🔐 Demo Admin Credentials:');
    console.log('📧 Email: admin@temdetudo.com');
    console.log('🔑 Password: admin123');
}, 2000);
</script>
</body>
</html>

