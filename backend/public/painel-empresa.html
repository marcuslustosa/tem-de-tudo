<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="mobile-web-app-capable" content="yes">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Painel - Tem de Tudo Empresa</title>
<meta name="theme-color" content="#6F1AB6">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link rel="manifest" href="/manifest.json">
<script src="/js/config.js"></script>
<script src="/js/auth-manager.js" defer></script>
<script src="/js/api-client.js" defer></script>
<script src="/js/validators.js" defer></script>
<script src="/js/ui-helpers.js" defer></script>
<script src="/js/auth-guard.js" data-require-auth="cliente"></script>
<link rel="stylesheet" href="/css/global-unified.css">
<link rel="stylesheet" href="/css/theme-escuro.css">`n<link rel="stylesheet" href="/css/style-unificado.css?v=3">
</head>
<body class="card">
<!-- Header Premium -->
<header >
<div style="position:absolute;width:400px;height:400px;background:radial-gradient(circle,rgba(255,255,255,0.1),transparent);top:-200px;right:-200px;border-radius:50%;"></div>
<div style="position:relative;z-index:1;max-width:1200px;margin:0 auto;">
<div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:32px;">
<div style="display:flex;align-items:center;gap:12px;">
<div style="width:50px;height:50px;background:rgba(255,255,255,0.2);border-radius:12px;display:flex;align-items:center;justify-content:center;backdrop-filter:blur(10px);">
<i class="fas fa-sparkles" style="font-size:24px;"></i>
</div>
<div style="font-size:22px;font-weight:900;">Tem de Tudo</div>
</div>
<button onclick="logout()" style="background:rgba(255,255,255,0.15);border:1px solid rgba(255,255,255,0.2);color: #1D1D1F;padding:10px 20px;border-radius:50px;cursor:pointer;font-weight:600;backdrop-filter:blur(10px);">
<i class="fas fa-sign-out-alt"></i> Sair
                </button>
</div>
<div>
<div style="font-size:14px;opacity:0.9;margin-bottom:8px;">Bem-vindo de volta!</div>
<div style="font-size:28px;font-weight:900;" id="companyName">Carregando...</div>
</div>
</div>
</header>
<script>
    // Carregar nome da empresa
    document.addEventListener('DOMContentLoaded', () => {
        const userStr = localStorage.getItem('user');
        if (userStr) {
            try {
                const user = JSON.parse(userStr);
                document.getElementById('companyName').textContent = user.nome || user.name || 'Empresa';
            } catch(e) {
                console.error('Erro ao carregar nome:', e);
            }
        }
        
        // Função logout
        window.logout = function() {
            localStorage.removeItem('token');
            localStorage.removeItem('user');
            window.location.href = '/index.html';
        };
    });
    </script>
<!-- Stats Cards -->
<div style="max-width:1200px;margin:-40px auto 0;padding:0 20px;">
<div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:20px;margin-bottom:32px;">
<div style="background:white;border-radius:20px;padding:24px;box-shadow:0 8px 24px rgba(102,126,234,0.08);border:1px solid rgba(102,126,234,0.08);">
<div style="display:flex;align-items:center;gap:16px;margin-bottom:16px;">
<div >
<i class="fas fa-users" style="font-size:24px;color: #1D1D1F;"></i>
</div>
<div>
<div style="font-size:32px;font-weight:900;color:#1a1a2e;" id="totalClientes">0</div>
<div style="font-size:13px;color:#7c8db0;font-weight:600;">Clientes Ativos</div>
</div>
</div>
<div style="font-size:12px;color:#10b981;font-weight:600;">
<i class="fas fa-arrow-up"></i> +12% este m?s
                </div>
</div>
<div style="background:white;border-radius:20px;padding:24px;box-shadow:0 8px 24px rgba(102,126,234,0.08);border:1px solid rgba(102,126,234,0.08);">
<div style="display:flex;align-items:center;gap:16px;margin-bottom:16px;">
<div >
<i class="fas fa-check-circle" style="font-size:24px;color: #1D1D1F;"></i>
</div>
<div>
<div style="font-size:32px;font-weight:900;color:#1a1a2e;" id="totalCheckins">0</div>
<div style="font-size:13px;color:#7c8db0;font-weight:600;">Check-ins Hoje</div>
</div>
</div>
<div style="font-size:12px;color:#10b981;font-weight:600;">
<i class="fas fa-arrow-up"></i> +8% vs ontem
                </div>
</div>
<div style="background:white;border-radius:20px;padding:24px;box-shadow:0 8px 24px rgba(102,126,234,0.08);border:1px solid rgba(102,126,234,0.08);">
<div style="display:flex;align-items:center;gap:16px;margin-bottom:16px;">
<div >
<i class="fas fa-star" style="font-size:24px;color: #1D1D1F;"></i>
</div>
<div>
<div style="font-size:32px;font-weight:900;color:#1a1a2e;" id="pontosDistribuidos">0</div>
<div style="font-size:13px;color:#7c8db0;font-weight:600;">Pontos Distribu?dos</div>
</div>
</div>
<div style="font-size:12px;color:#10b981;font-weight:600;">
<i class="fas fa-arrow-up"></i> +25% este m?s
                </div>
</div>
<div style="background:white;border-radius:20px;padding:24px;box-shadow:0 8px 24px rgba(102,126,234,0.08);border:1px solid rgba(102,126,234,0.08);">
<div style="display:flex;align-items:center;gap:16px;margin-bottom:16px;">
<div >
<i class="fas fa-gift" style="font-size:24px;color: #1D1D1F;"></i>
</div>
<div>
<div style="font-size:32px;font-weight:900;color:#1a1a2e;" id="promocoesAtivas">0</div>
<div style="font-size:13px;color:#7c8db0;font-weight:600;">Promo??es Ativas</div>
</div>
</div>
<div style="font-size:12px;color:#667eea;font-weight:600;">
<i class="fas fa-plus"></i> Criar nova
                </div>
</div>
</div>
</div>
<!-- A??es R?pidas -->
<div style="max-width:1200px;margin:0 auto;padding:0 20px 32px;">
<h2 style="font-size:22px;font-weight:800;color:#1a1a2e;margin-bottom:20px;">
<i class="fas fa-bolt" style="color:#667eea;"></i> A??es R?pidas
        </h2>
<div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;">
<a href="/empresa/qrcode" style="background:white;border-radius:16px;padding:20px;text-decoration:none;color:#1a1a2e;display:flex;align-items:center;gap:16px;box-shadow:0 4px 12px rgba(102,126,234,0.05);border:1px solid rgba(102,126,234,0.08);transition:all 0.3s;" onmouseover="this.style.transform='translateY(-4px)';this.style.boxShadow='0 8px 24px rgba(102,126,234,0.12)';" onmouseout="this.style.transform='';this.style.boxShadow='0 4px 12px rgba(102,126,234,0.05)';">
<div >
<i class="fas fa-qrcode" style="font-size:20px;color: #1D1D1F;"></i>
</div>
<div style="font-weight:700;font-size:15px;">Meu QR Code</div>
</a>
<a href="/empresa/promocoes" style="background:white;border-radius:16px;padding:20px;text-decoration:none;color:#1a1a2e;display:flex;align-items:center;gap:16px;box-shadow:0 4px 12px rgba(102,126,234,0.05);border:1px solid rgba(102,126,234,0.08);transition:all 0.3s;" onmouseover="this.style.transform='translateY(-4px)';this.style.boxShadow='0 8px 24px rgba(102,126,234,0.12)';" onmouseout="this.style.transform='';this.style.boxShadow='0 4px 12px rgba(102,126,234,0.05)';">
<div >
<i class="fas fa-tags" style="font-size:20px;color: #1D1D1F;"></i>
</div>
<div style="font-weight:700;font-size:15px;">Promo??es</div>
</a>
<a href="/empresa/clientes" style="background:white;border-radius:16px;padding:20px;text-decoration:none;color:#1a1a2e;display:flex;align-items:center;gap:16px;box-shadow:0 4px 12px rgba(102,126,234,0.05);border:1px solid rgba(102,126,234,0.08);transition:all 0.3s;" onmouseover="this.style.transform='translateY(-4px)';this.style.boxShadow='0 8px 24px rgba(102,126,234,0.12)';" onmouseout="this.style.transform='';this.style.boxShadow='0 4px 12px rgba(102,126,234,0.05)';">
<div >
<i class="fas fa-users" style="font-size:20px;color: #1D1D1F;"></i>
</div>
<div style="font-weight:700;font-size:15px;">Ver Clientes</div>
</a>
<a href="/empresa/scanner" style="background:white;border-radius:16px;padding:20px;text-decoration:none;color:#1a1a2e;display:flex;align-items:center;gap:16px;box-shadow:0 4px 12px rgba(102,126,234,0.05);border:1px solid rgba(102,126,234,0.08);transition:all 0.3s;" onmouseover="this.style.transform='translateY(-4px)';this.style.boxShadow='0 8px 24px rgba(102,126,234,0.12)';" onmouseout="this.style.transform='';this.style.boxShadow='0 4px 12px rgba(102,126,234,0.05)';">
<div >
<i class="fas fa-camera" style="font-size:20px;color: #1D1D1F;"></i>
</div>
<div style="font-weight:700;font-size:15px;">Escanear</div>
</a>
</div>
</div>
<!-- Bottom Nav -->
<nav style="position:fixed;bottom:0;left:0;right:0;background:white;border-top:1px solid rgba(102,126,234,0.1);display:flex;justify-content:space-around;padding:12px 0;box-shadow:0 -10px 40px rgba(102,126,234,0.08);z-index:100;">
<a href="/empresa/painel" style="flex:1;display:flex;flex-direction:column;align-items:center;gap:6px;text-decoration:none;color:#667eea;background:rgba(102,126,234,0.08);padding:8px;border-radius:12px;">
<i class="fas fa-home" style="font-size:22px;"></i>
<span style="font-size:11px;font-weight:700;">In?cio</span>
</a>
<a href="/empresa/promocoes" style="flex:1;display:flex;flex-direction:column;align-items:center;gap:6px;text-decoration:none;color:#7c8db0;padding:8px;">
<i class="fas fa-tags" style="font-size:22px;"></i>
<span style="font-size:11px;font-weight:700;">Promo??es</span>
</a>
<a href="/empresa/scanner" style="flex:1;display:flex;flex-direction:column;align-items:center;gap:6px;text-decoration:none;color:#7c8db0;padding:8px;">
<i class="fas fa-qrcode" style="font-size:22px;"></i>
<span style="font-size:11px;font-weight:700;">Scanner</span>
</a>
<a href="/empresa/clientes" style="flex:1;display:flex;flex-direction:column;align-items:center;gap:6px;text-decoration:none;color:#7c8db0;padding:8px;">
<i class="fas fa-users" style="font-size:22px;"></i>
<span style="font-size:11px;font-weight:700;">Clientes</span>
</a>
<a href="/empresa/configuracoes" style="flex:1;display:flex;flex-direction:column;align-items:center;gap:6px;text-decoration:none;color:#7c8db0;padding:8px;">
<i class="fas fa-cog" style="font-size:22px;"></i>
<span style="font-size:11px;font-weight:700;">Config</span>
</a>
</nav>
<script>
        async function loadDashboard() {
            const token = localStorage.getItem('token');
            if (!token) {
                window.location.href = '/entrar';
                return;
            }

            try {
                const response = await fetch('/api/empresa/dashboard', {
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Accept': 'application/json'
                    }
                });

                if (response.ok) {
                    const data = await response.json();
                    document.getElementById('companyName').textContent = data.empresa?.nome_fantasia || 'Minha Empresa';
                    document.getElementById('totalClientes').textContent = data.total_clientes || 0;
                    document.getElementById('totalCheckins').textContent = data.checkins_hoje || 0;
                    document.getElementById('pontosDistribuidos').textContent = data.pontos_distribuidos || 0;
                    document.getElementById('promocoesAtivas').textContent = data.promocoes_ativas || 0;
                }
            } catch (error) {
                console.error('Erro:', error);
            }
        }

        function logout() {
            if (confirm('Deseja sair?')) {
                localStorage.removeItem('token');
                window.location.href = '/entrar';
            }
        }

        loadDashboard();
    </script>
</body>
</html>


